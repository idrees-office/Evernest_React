import{u as A,c as I,T as O,r as t,b as F,s as M,a3 as V,a as u,j as a}from"./index-fe5baaac.js";import{T as z}from"./Table-e1ed3aa9.js";import{I as B}from"./IconBell-d99e5090.js";import{L as Y}from"./loader-88e97bac.js";import{S as q}from"./react-select.esm-7abf61d7.js";import{L as G}from"./LeadModal-a00a8d17.js";/* empty css                  */import"./jspdf.plugin.autotable-a78f8a73.js";import{C as i}from"./status-2cad2f88.js";import"./floating-ui.dom.browser.min-b8726d47.js";import"./extends-4c19d496.js";import"./objectWithoutPropertiesLoose-f3b3ace0.js";import"./transition-f432e32a.js";import"./IconThumbUp-91d06cd2.js";import"./IconTrash-43205dbe.js";const ce=()=>{const r=A();I();const d=O(),[v,b]=t.useState(!1);t.useState(!1),t.useState([]),t.useState(!0);const[p,C]=t.useState(i[3].value),[o,y]=t.useState(""),[h,P]=t.useState(""),[n,x]=t.useState({columnAccessor:"id",direction:"desc"}),[c,s]=t.useState(1),[l,T]=t.useState(10),{leads:g,loading:f,agents:H,total:N}=F(e=>e.leadslices);t.useEffect(()=>{r(M("RoadShow Leads"))},[r]),t.useEffect(()=>{(o.length>=3||o.length===0)&&(P(o),s(1))},[o]),t.useEffect(()=>{const e={page:c,perPage:l,sortField:n.columnAccessor,sortOrder:n.direction,search:h,cityname:p};r(V(e))},[r,c,l,n,h,p]);const D=e=>{C(e.value),s(1)},E=e=>{s(e)},L=e=>{T(e),s(1)},k=e=>{x(e),s(1)},R=e=>{y(e.target.value),s(1)},S=(Array.isArray(g)?g:[]).map((e,w)=>{const m=e==null?void 0:e.created_at,j=m&&!isNaN(new Date(m).getTime())?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(m)):"Invalid Date";return{id:(e==null?void 0:e.lead_id)||"Unknown",title:(e==null?void 0:e.lead_title)||"Unknown",name:(e==null?void 0:e.customer_name)||"Unknown",phone:(e==null?void 0:e.customer_phone)||"Unknown",email:(e==null?void 0:e.customer_email)||"Unknown",date:j}}),U=()=>{const e=S.map(w=>w.email).join(`
`);navigator.clipboard.writeText(e).then(()=>{d.success("Emails copied to clipboard!")}).catch(()=>{d.error("Failed to copy emails.")})},_=[{accessor:"title",title:"Title",sortable:!0},{accessor:"name",title:"Name",sortable:!0},{accessor:"phone",title:"Phone",sortable:!0},{accessor:"email",title:"Email",sortable:!0,render:e=>a("span",{className:"badge bg-secondary cursor-pointer",onClick:U,children:e.email})},{accessor:"date",title:"Date",sortable:!0}];return u("div",{children:[u("div",{className:"panel flex items-center justify-between overflow-visible whitespace-nowrap p-3 text-dark relative",children:[u("div",{className:"flex items-center",children:[a("div",{className:"rounded-full bg-primary p-1.5 text-white ring-2 ring-primary/30 ltr:mr-3 rtl:ml-3",children:a(B,{})}),a("span",{className:"ltr:mr-3 rtl:ml-3",children:"Details of Your Road-Show Leads."})]}),a("div",{className:"flex items-center space-x-2",children:a(q,{placeholder:"Choose City..",options:i.map(e=>({value:e.value,label:e.name})),onChange:D,defaultValue:{value:i[3].value,label:i[3].name},name:"name",className:"cursor-pointer custom-multiselect z-10 w-[300px]"})})]}),a("div",{className:"datatables mt-6",children:f?a(Y,{}):a(z,{title:"Show Road-Show Leads",columns:_,rows:S,totalRecords:N||0,currentPage:c,recordsPerPage:l,onPageChange:E,onRecordsPerPageChange:L,onSortChange:k,sortStatus:n,isLoading:f,onSearchChange:R,searchValue:o,noRecordsText:"No records found matching your search criteria"})}),a(G,{isOpen:v,onClose:()=>b(!1)})]})};export{ce as default};
