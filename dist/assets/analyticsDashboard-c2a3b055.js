import{Y as g,u as I,r as s,s as _,Z as b,a as t,j as e,L as z,B as F}from"./index-8e098778.js";import{T as H}from"./Table-a7b7d199.js";import{I as M,b as U,a as Y}from"./IconClock-cb6eefc9.js";import{Y as u,y as f}from"./transition-eb1e0e5c.js";import"./index-b1c16c0c.js";import"./floating-ui.dom.browser.min-b8726d47.js";import"./extends-4c19d496.js";const x={reportApi:`${g()}/subscriber/tracking-report`,userReadEmailApi:`${g()}/subscriber/check-read-email`},J=()=>{const c=I(),v=s.useRef({fetched:!1}),[N,y]=s.useState([]),[C,k]=s.useState(0),[r,S]=s.useState(1),[d,w]=s.useState(10),[i,P]=s.useState({columnAccessor:"id",direction:"desc"}),[R,n]=s.useState(!1),[l,T]=s.useState({subscriber:0,totalCampaigns:0,totalEmails:0,totalSendCampaigns:0,PendingCampaign:0,openRate:0,hotLeads:0}),[o,m]=s.useState(!1),[h,E]=s.useState([]);s.useEffect(()=>{c(_("Create User")),L(),v.current.fetched=!0},[c,r,d,i]);const L=async()=>{n(!0);try{const a=await b.get(x.reportApi,{params:{page:r,per_page:d,sort_field:i.columnAccessor,sort_direction:i.direction}});y(a.data.reports),T({subscriber:a.data.subscriber,totalCampaigns:a.data.totalCampaigns,totalEmails:a.data.totalEmails,totalSendCampaigns:a.data.totalSendCampaigns,PendingCampaign:a.data.PendingCampaign,openRate:a.data.openRate,hotLeads:a.data.hotLeads}),k(a.data.totalCampaigns)}catch(a){console.error("Error fetching data:",a)}finally{n(!1)}},A=async()=>{const a=await b.get(x.userReadEmailApi);a.data&&(E(a.data),m(!0))},p=a=>{m(a)},j=[{accessor:"id",title:"Total",sortable:!0,key:"id"},{accessor:"name",title:"Campaign Name",sortable:!0,key:"name",render:a=>e("div",{className:"text-black dark:text-white",children:e("span",{className:"whitespace-nowrap",children:a.name})})},{accessor:"type",title:"Type",key:"type",render:a=>a.type==1?e("span",{className:"badge bg-success",children:"Immidiate"}):e("span",{className:"badge bg-warning",children:"Scheduled"})},{accessor:"total",title:"Total",sortable:!0,key:"total"},{accessor:"sent",title:"Sent",sortable:!0,key:"send"},{accessor:"read",title:"Read",sortable:!0,key:"read"},{accessor:"scheduled_at",title:"Scheduled At | Send-Time",key:"scheduled_at"},{accessor:"created_at",title:"Created At",key:"created_at"},{accessor:"status",title:"Status",key:"status",render:a=>a.status==1?e(U,{className:"text-success"}):e(Y,{className:"text-info"})}];return t("div",{children:[t("ul",{className:"flex space-x-2 rtl:space-x-reverse",children:[e("li",{children:e(z,{to:"/",className:"text-primary hover:underline",children:" Dashboard "})}),e("li",{className:"before:content-['/'] ltr:before:mr-2 rtl:before:ml-2",children:e("span",{children:"Analytics"})})]}),e("div",{className:"pt-5",children:t("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-3",children:[t("div",{className:"panel h-full sm:col-span-2 lg:col-span-1",children:[e("div",{className:"flex justify-between dark:text-white-light mb-5",children:e("h5",{className:"font-semibold text-lg",children:"Campaign Summary"})}),t("div",{className:"grid sm:grid-cols-2 gap-8 text-sm text-[#515365] font-bold",children:[t("div",{children:[e("div",{children:"Total Emails"}),e("div",{className:"text-[#f8538d] text-md",children:l.totalEmails})]}),t("div",{children:[e("div",{children:"Total Campaigns"}),e("div",{className:"text-[#f8538d] text-md",children:l.totalCampaigns})]})]})]}),t("div",{className:"panel h-full sm:col-span-2 lg:col-span-1",children:[e("div",{className:"flex justify-between dark:text-white-light mb-5",children:e("h5",{className:"font-semibold text-lg",children:"Campaign Performance"})}),t("div",{className:"grid sm:grid-cols-2 gap-8 text-sm text-[#515365] font-bold",children:[t("div",{children:[e("div",{children:"Pending Campaigns"}),e("div",{className:"text-[#f8538d] text-sm",children:l.PendingCampaign})]}),t("div",{children:[e("div",{children:"Send Campaigns"}),e("div",{className:"text-[#f8538d] text-sm",children:l.totalSendCampaigns})]})]})]}),t("div",{className:"panel h-full sm:col-span-2 lg:col-span-1",children:[e("div",{className:"flex justify-between dark:text-white-light mb-5",children:e("h5",{className:"font-semibold text-lg",children:"Email Performance"})}),t("div",{className:"grid sm:grid-cols-2 gap-8 text-sm text-[#515365] font-bold",children:[t("div",{children:[e("div",{children:"Open Rate"}),t("div",{className:"text-[#f8538d] text-sm",children:[l.openRate,"%"]})]}),t("div",{style:{cursor:"pointer"},onClick:A,children:[e("div",{children:"Hot Leads"}),e("div",{className:"text-[#f8538d] text-sm",children:l.hotLeads})]})]})]}),t("div",{className:"panel h-full",children:[e("div",{className:"flex justify-between dark:text-white-light mb-5",children:e("h5",{className:"font-semibold text-lg",children:"Current | Total Subscribers"})}),t("div",{className:" text-[#e95f2b] text-3xl font-bold my-10",children:[e("span",{children:l.subscriber}),e(M,{className:"text-success inline ml-2"})]})]})]})}),e("div",{className:"pt-2",children:e("div",{className:"h-full w-full",children:e(H,{columns:j,rows:N,title:"",totalRecords:C,currentPage:r,recordsPerPage:d,onPageChange:S,onRecordsPerPageChange:w,onSortChange:P,sortStatus:i,isLoading:R,noRecordsText:"No campaign data available",idAccessor:"id"})})}),e(u,{appear:!0,show:o,as:s.Fragment,children:e(f,{as:"div",open:o,onClose:()=>p(!1),children:e("div",{className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:e("div",{className:"flex items-start justify-center",children:e(u.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t(f.Panel,{as:"div",className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-7xl my-8 text-black dark:text-white-dark",children:[t("div",{className:"flex items-center justify-between bg-[#fbfbfb] px-5 py-3 dark:bg-[#121c2c]",children:[e("div",{className:"text-lg font-bold",children:"Report"}),e("button",{type:"button",className:"text-white-dark hover:text-dark",onClick:()=>p(!1),children:e(F,{})})]}),e("div",{className:"p-5",children:h.length>0?e("div",{className:"overflow-x-auto",children:t("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e("thead",{className:"bg-gray-100 dark:bg-gray-800",children:t("tr",{children:[e("th",{className:"border-b p-3 text-left",children:"Subscriber"}),e("th",{className:"border-b p-3 text-left",children:"Campaign"}),e("th",{className:"border-b p-3 text-left",children:"Emails"}),e("th",{className:"border-b p-3 text-left",children:"Reads"})]})}),e("tbody",{children:h.map((a,D)=>t("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e("td",{className:"border-b p-3",children:a.name}),e("td",{className:"border-b p-3",children:a.campaign}),e("td",{className:"border-b p-3",children:a.emails}),e("td",{className:"border-b p-3",children:a.read})]},D))})]})}):e("div",{children:"No hot leads found."})})]})})})})})})]})};export{J as default};
