import{u as N,c as S,T as C,r as s,s as D,a5 as p,b as T,a as i,j as t}from"./index-e157d356.js";import{T as k}from"./Table-c282029f.js";import{I as E}from"./IconBell-f12a5e79.js";import{L as I}from"./loader-e0cc4de8.js";import{S as L}from"./react-select.esm-5f2828b1.js";import{L as A}from"./LeadModal-a5314d46.js";/* empty css                  */import{D as U,C as _}from"./status-b3b23402.js";import"./jspdf.plugin.autotable-ff63841b.js";import"./index-28664b9a.js";import"./floating-ui.dom.browser.min-b8726d47.js";import"./extends-4c19d496.js";import"./_baseIsEqual-b7d49d11.js";import"./objectWithoutPropertiesLoose-f3b3ace0.js";import"./transition-80348dfc.js";import"./IconThumbUp-0fa80d70.js";import"./IconTrash-41f80b7a.js";const Z=()=>{const a=N();S();const n=C(),d=I(),u=_;U();const c=s.useRef({fetched:!1,form:null});s.useState([]),s.useState(!0);const[h,f]=s.useState(!1),[g,b]=s.useState("Canada");s.useState([]),s.useEffect(()=>{c.current.fetched||(a(D("Re-Assign Leads")),a(p({cityname:g})),c.current.fetched=!0)},[a]);const{leads:l,loading:w,agents:j}=T(e=>e.leadslices),y=e=>{b(e.value),a(p({cityname:e.value}))},r=(Array.isArray(l)?l:[]).map((e,m)=>{const o=e==null?void 0:e.created_at,x=o&&!isNaN(new Date(o).getTime())?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(o)):"Invalid Date";return{id:(e==null?void 0:e.lead_id)||"Unknown",title:(e==null?void 0:e.lead_title)||"Unknown",name:(e==null?void 0:e.customer_name)||"Unknown",phone:(e==null?void 0:e.customer_phone)||"Unknown",email:(e==null?void 0:e.customer_email)||"Unknown",date:x}}),v=()=>{const e=r.map(m=>m.email).join(`
`);navigator.clipboard.writeText(e).then(()=>{n.success("Emails copied to clipboard!")}).catch(()=>{n.error("Failed to copy emails.")})};return i("div",{children:[i("div",{className:"panel flex items-center justify-between overflow-visible whitespace-nowrap p-3 text-dark relative",children:[i("div",{className:"flex items-center",children:[t("div",{className:"rounded-full bg-primary p-1.5 text-white ring-2 ring-primary/30 ltr:mr-3 rtl:ml-3",children:t(E,{})}),t("span",{className:"ltr:mr-3 rtl:ml-3",children:" Details of Your Road-Show Leads."})]}),t("div",{className:"flex items-center space-x-2",children:t(L,{placeholder:"Choose City..",options:u.map(e=>({value:e.value,label:e.name})),onChange:e=>y(e),name:"name",className:"cursor-pointer custom-multiselect z-10 w-[300px]"})})]}),t("div",{className:"datatables mt-6",children:w?d:r.length>0?t(k,{title:"Export-pdf Agents-wise",columns:[{accessor:"title",title:"Title",sortable:!0},{accessor:"name",title:"Name",sortable:!0},{accessor:"phone",title:"Phone",sortable:!0},{accessor:"email",title:"Email",sortable:!0,render:e=>t("span",{className:"badge bg-secondary cursor-pointer",onClick:v,children:e.email})},{accessor:"date",title:"Date",sortable:!0}],rows:r}):t("div",{className:"panel text-center text-primary-500 mt-4",children:t("span",{className:"badge bg-secondary",children:" Sorry, I am unable to retrieve data. Please check your API . "})})}),t(A,{isOpen:h,onClose:()=>f(!1)})]})};export{Z as default};
