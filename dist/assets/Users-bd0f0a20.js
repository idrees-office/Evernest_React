import{r as s,R as q,X as W,Y as G,b as e,j as l,u as qe,s as Ve,F as Je,A as Xe,S as me}from"./index-59da1b0a.js";import{o as ge,e as _e,d as be}from"./status-f20bd91b.js";import{S as Z}from"./react-select.esm-87de0073.js";import{I as Qe}from"./IconTrashLines-61819eb7.js";import{I as Ke}from"./IconPencil-c662a0b6.js";import{T as Ze}from"./Table-95a86c30.js";import{F as Ne}from"./index-11e34e8f.js";/* empty css                  *//* empty css                  */import{I as et}from"./IconEye-343c6480.js";import{l as V,h as Pe,s as tt,V as ae,a as re,b as pe,o as z,X as le,I as Ie,j as Te,u as ne,A as te,N as ie,e as nt,c as R,d as H,L as A,t as at,Y as he,y as fe}from"./transition-a7548924.js";import"./IconSquareCheck-04569e3a.js";import"./IconStar-b224c1d1.js";import"./IconTrash-529eb3b6.js";import"./IconCalendar-9c9a2299.js";import"./objectWithoutPropertiesLoose-f3b3ace0.js";import"./extends-4c19d496.js";import"./floating-ui.dom.browser.min-b8726d47.js";import"./index-953c269e.js";function Se(t){var a;if(t.type)return t.type;let r=(a=t.as)!=null?a:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function rt(t,a){let[r,i]=s.useState(()=>Se(t));return V(()=>{i(Se(t))},[t.type,t.as]),V(()=>{r||!a.current||a.current instanceof HTMLButtonElement&&!a.current.hasAttribute("type")&&i("button")},[r,a]),r}function lt({onFocus:t}){let[a,r]=s.useState(!0);return a?q.createElement(Pe,{as:"button",type:"button",features:tt.Focusable,onFocus:i=>{i.preventDefault();let u,p=50;function f(){if(p--<=0){u&&cancelAnimationFrame(u);return}if(t()){r(!1),cancelAnimationFrame(u);return}u=requestAnimationFrame(f)}u=requestAnimationFrame(f)}}):null}const Ce=s.createContext(null);function st(){return{groups:new Map,get(t,a){var r;let i=this.groups.get(t);i||(i=new Map,this.groups.set(t,i));let u=(r=i.get(a))!=null?r:0;i.set(a,u+1);let p=Array.from(i.keys()).indexOf(a);function f(){let S=i.get(a);S>1?i.set(a,S-1):i.delete(a)}return[p,f]}}}function it({children:t}){let a=s.useRef(st());return s.createElement(Ce.Provider,{value:a},t)}function Ee(t){let a=s.useContext(Ce);if(!a)throw new Error("You must wrap your component in a <StableCollection>");let r=ot(),[i,u]=a.current.get(t,r);return s.useEffect(()=>u,[]),i}function ot(){var t,a,r;let i=(r=(a=(t=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)==null?void 0:t.ReactCurrentOwner)==null?void 0:a.current)!=null?r:null;if(!i)return Symbol();let u=[],p=i;for(;p;)u.push(p.index),p=p.return;return"$."+u.join(".")}var ct=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(ct||{}),dt=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(dt||{}),ut=(t=>(t[t.SetSelectedIndex=0]="SetSelectedIndex",t[t.RegisterTab=1]="RegisterTab",t[t.UnregisterTab=2]="UnregisterTab",t[t.RegisterPanel=3]="RegisterPanel",t[t.UnregisterPanel=4]="UnregisterPanel",t))(ut||{});let mt={[0](t,a){var r;let i=te(t.tabs,m=>m.current),u=te(t.panels,m=>m.current),p=i.filter(m=>{var v;return!((v=m.current)!=null&&v.hasAttribute("disabled"))}),f={...t,tabs:i,panels:u};if(a.index<0||a.index>i.length-1){let m=ne(Math.sign(a.index-t.selectedIndex),{[-1]:()=>1,[0]:()=>ne(Math.sign(a.index),{[-1]:()=>0,[0]:()=>0,[1]:()=>1}),[1]:()=>0});return p.length===0?f:{...f,selectedIndex:ne(m,{[0]:()=>i.indexOf(p[0]),[1]:()=>i.indexOf(p[p.length-1])})}}let S=i.slice(0,a.index),c=[...i.slice(a.index),...S].find(m=>p.includes(m));if(!c)return f;let y=(r=i.indexOf(c))!=null?r:t.selectedIndex;return y===-1&&(y=t.selectedIndex),{...f,selectedIndex:y}},[1](t,a){var r;if(t.tabs.includes(a.tab))return t;let i=t.tabs[t.selectedIndex],u=te([...t.tabs,a.tab],f=>f.current),p=(r=u.indexOf(i))!=null?r:t.selectedIndex;return p===-1&&(p=t.selectedIndex),{...t,tabs:u,selectedIndex:p}},[2](t,a){return{...t,tabs:t.tabs.filter(r=>r!==a.tab)}},[3](t,a){return t.panels.includes(a.panel)?t:{...t,panels:te([...t.panels,a.panel],r=>r.current)}},[4](t,a){return{...t,panels:t.panels.filter(r=>r!==a.panel)}}},xe=s.createContext(null);xe.displayName="TabsDataContext";function J(t){let a=s.useContext(xe);if(a===null){let r=new Error(`<${t} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,J),r}return a}let ye=s.createContext(null);ye.displayName="TabsActionsContext";function ve(t){let a=s.useContext(ye);if(a===null){let r=new Error(`<${t} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ve),r}return a}function pt(t,a){return ne(a.type,mt,t,a)}let ht=s.Fragment,ft=ae(function(t,a){let{defaultIndex:r=0,vertical:i=!1,manual:u=!1,onChange:p,selectedIndex:f=null,...S}=t;const c=i?"vertical":"horizontal",y=u?"manual":"auto";let m=f!==null,v=re(a),[b,w]=s.useReducer(pt,{selectedIndex:f??r,tabs:[],panels:[]}),T=s.useMemo(()=>({selectedIndex:b.selectedIndex}),[b.selectedIndex]),$=pe(p||(()=>{})),k=pe(b.tabs),N=s.useMemo(()=>({orientation:c,activation:y,...b}),[c,y,b]),P=z(x=>(w({type:1,tab:x}),()=>w({type:2,tab:x}))),D=z(x=>(w({type:3,panel:x}),()=>w({type:4,panel:x}))),U=z(x=>{I.current!==x&&$.current(x),m||w({type:0,index:x})}),I=pe(m?t.selectedIndex:b.selectedIndex),X=s.useMemo(()=>({registerTab:P,registerPanel:D,change:U}),[]);V(()=>{w({type:0,index:f??r})},[f]),V(()=>{if(I.current===void 0||b.tabs.length<=0)return;let x=te(b.tabs,C=>C.current);x.some((C,h)=>b.tabs[h]!==C)&&U(x.indexOf(b.tabs[I.current]))});let M={ref:v};return q.createElement(it,null,q.createElement(ye.Provider,{value:X},q.createElement(xe.Provider,{value:N},N.tabs.length<=0&&q.createElement(lt,{onFocus:()=>{var x,C;for(let h of k.current)if(((x=h.current)==null?void 0:x.tabIndex)===0)return(C=h.current)==null||C.focus(),!0;return!1}}),le({ourProps:M,theirProps:S,slot:T,defaultTag:ht,name:"Tabs"}))))}),gt="div",_t=ae(function(t,a){let{orientation:r,selectedIndex:i}=J("Tab.List"),u=re(a);return le({ourProps:{ref:u,role:"tablist","aria-orientation":r},theirProps:t,slot:{selectedIndex:i},defaultTag:gt,name:"Tabs.List"})}),bt="button",xt=ae(function(t,a){var r,i;let u=Ie(),{id:p=`headlessui-tabs-tab-${u}`,...f}=t,{orientation:S,activation:c,selectedIndex:y,tabs:m,panels:v}=J("Tab"),b=ve("Tab"),w=J("Tab"),T=s.useRef(null),$=re(T,a);V(()=>b.registerTab(T),[b,T]);let k=Ee("tabs"),N=m.indexOf(T);N===-1&&(N=k);let P=N===y,D=z(h=>{var E;let L=h();if(L===ie.Success&&c==="auto"){let oe=(E=nt(T))==null?void 0:E.activeElement,Q=w.tabs.findIndex(ce=>ce.current===oe);Q!==-1&&b.change(Q)}return L}),U=z(h=>{let E=m.map(L=>L.current).filter(Boolean);if(h.key===R.Space||h.key===R.Enter){h.preventDefault(),h.stopPropagation(),b.change(N);return}switch(h.key){case R.Home:case R.PageUp:return h.preventDefault(),h.stopPropagation(),D(()=>H(E,A.First));case R.End:case R.PageDown:return h.preventDefault(),h.stopPropagation(),D(()=>H(E,A.Last))}if(D(()=>ne(S,{vertical(){return h.key===R.ArrowUp?H(E,A.Previous|A.WrapAround):h.key===R.ArrowDown?H(E,A.Next|A.WrapAround):ie.Error},horizontal(){return h.key===R.ArrowLeft?H(E,A.Previous|A.WrapAround):h.key===R.ArrowRight?H(E,A.Next|A.WrapAround):ie.Error}}))===ie.Success)return h.preventDefault()}),I=s.useRef(!1),X=z(()=>{var h;I.current||(I.current=!0,(h=T.current)==null||h.focus(),b.change(N),at(()=>{I.current=!1}))}),M=z(h=>{h.preventDefault()}),x=s.useMemo(()=>({selected:P}),[P]),C={ref:$,onKeyDown:U,onMouseDown:M,onClick:X,id:p,role:"tab",type:rt(t,T),"aria-controls":(i=(r=v[N])==null?void 0:r.current)==null?void 0:i.id,"aria-selected":P,tabIndex:P?0:-1};return le({ourProps:C,theirProps:f,slot:x,defaultTag:bt,name:"Tabs.Tab"})}),yt="div",vt=ae(function(t,a){let{selectedIndex:r}=J("Tab.Panels"),i=re(a),u=s.useMemo(()=>({selectedIndex:r}),[r]);return le({ourProps:{ref:i},theirProps:t,slot:u,defaultTag:yt,name:"Tabs.Panels"})}),wt="div",Nt=Te.RenderStrategy|Te.Static,Tt=ae(function(t,a){var r,i,u,p;let f=Ie(),{id:S=`headlessui-tabs-panel-${f}`,tabIndex:c=0,...y}=t,{selectedIndex:m,tabs:v,panels:b}=J("Tab.Panel"),w=ve("Tab.Panel"),T=s.useRef(null),$=re(T,a);V(()=>w.registerPanel(T),[w,T]);let k=Ee("panels"),N=b.indexOf(T);N===-1&&(N=k);let P=N===m,D=s.useMemo(()=>({selected:P}),[P]),U={ref:$,id:S,role:"tabpanel","aria-labelledby":(i=(r=v[N])==null?void 0:r.current)==null?void 0:i.id,tabIndex:P?c:-1};return!P&&((u=y.unmount)==null||u)&&!((p=y.static)!=null&&p)?q.createElement(Pe,{as:"span",...U}):le({ourProps:U,theirProps:y,slot:D,defaultTag:wt,features:Nt,visible:P,name:"Tabs.Panel"})}),Y=Object.assign(xt,{Group:ft,List:_t,Panels:vt,Panel:Tt});const St={pullFileApi:`${W()}/users/pull_file`},Pt=({isOpen:t,onClose:a,user:r})=>{var f,S,c,y;const[i,u]=s.useState([]);s.useEffect(()=>{t&&p()},[t]);const p=async()=>{var m;try{const v=await G.post(St.pullFileApi,{user_id:r==null?void 0:r.client_user_id});v.data&&(v.data?u(v.data.media||[]):u([]))}catch(v){((m=v.response)==null?void 0:m.status)===403&&(window.location.href="/error"),u([])}};return e(he,{appear:!0,show:t,as:s.Fragment,children:l(fe,{as:"div",open:t,onClose:a,className:"relative z-50",children:[e(he.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e(he.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:l(fe.Panel,{className:"w-full max-w-3xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e(fe.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"User Details"}),l(Y.Group,{children:[l(Y.List,{className:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mt-4",children:[e(Y,{className:({selected:m})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700
                                                ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2
                                                ${m?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"}`,children:"Personal Information"}),e(Y,{className:({selected:m})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700
                                                ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2
                                                ${m?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"}`,children:"Documents"})]}),l(Y.Panels,{className:"mt-2",children:[e(Y.Panel,{className:"rounded-xl bg-white p-3",children:r&&l("div",{className:"overflow-hidden",children:[l("div",{className:"flex items-center mb-6 p-4 bg-gray-50 rounded-lg",children:[e("div",{className:"flex-shrink-0 h-16 w-16 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-2xl font-bold",children:r.client_user_name.charAt(0)}),l("div",{className:"ml-4",children:[e("h3",{className:"text-xl font-bold text-gray-800",children:r.client_user_name}),e("p",{className:"text-gray-600",children:r.client_user_designation})]})]}),e("table",{className:"min-w-full divide-y divide-gray-200",children:l("tbody",{className:"bg-white divide-y divide-gray-200",children:[l("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500",children:"Email"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.client_user_email})]}),l("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500",children:"Phone"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.client_user_phone})]}),l("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500",children:"Status"}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:"badge bg-success",children:((f=ge.find(m=>m.value===r.client_user_status))==null?void 0:f.label)||"Inactive"})})]}),l("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500",children:"Role"}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:"badge bg-secondary",children:(c=(S=r.roles)==null?void 0:S[0])==null?void 0:c.name})})]}),l("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500",children:"Date of Birth"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e("span",{className:"badge bg-dark",children:r.client_user_dob||"Unknown"})})]}),l("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500",children:"Joining Date"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e("span",{className:"badge bg-dark",children:r.client_user_joing_date||"Unknown"})})]}),l("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500",children:"Employee Type"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e("span",{className:"badge bg-info",children:((y=_e.find(m=>m.value===r.client_user_type))==null?void 0:y.label)||"Unknown"})})]}),l("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500",children:"Allowed Leave Days"}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e("span",{className:"badge bg-secondary",children:r.client_user_allow_leave||0})})]})]})})]})}),e(Y.Panel,{className:"rounded-xl bg-white p-3",children:i&&i.length>0?e("div",{className:"space-y-4",children:i.map((m,v)=>{var b;return e("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:l("div",{className:"flex justify-between items-center",children:[l("div",{children:[e("p",{className:"font-semibold",children:((b=be.find(w=>w.value==m.collection_name))==null?void 0:b.label)||"Document"}),e("p",{className:"text-sm text-gray-500",children:m.file_name})]}),e("a",{href:m.original_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"View"})]})},v)})}):e("div",{className:"text-center py-8 text-gray-500",children:"No documents found for this user"})})]})]}),e("div",{className:"mt-6 flex justify-end",children:e("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2",onClick:a,children:"Close"})})]})})})})]})})},ee={createApi:`${W()}/users/create_user`,roleApi:`${W()}/users/get_user_role?for_select=1`,listApi:`${W()}/users/user_list`,destoryApi:`${W()}/users/delete_user`,updateApi:`${W()}/users/update_user`},qt=()=>{const t=qe(),a=s.useRef({userformRef:null}),[r,i]=s.useState([]),[u,p]=s.useState(null),[f,S]=s.useState(null),[c,y]=s.useState({}),[m,v]=s.useState(null),[b,w]=s.useState(null),T=s.useRef(!1),[$,k]=s.useState(1),[N,P]=s.useState(10),[D,U]=s.useState(0),[I,X]=s.useState({columnAccessor:"client_user_id",direction:"asc"}),[M,x]=s.useState(""),[C,h]=s.useState([]),[E,L]=s.useState(null),[oe,Q]=s.useState(!1),[ce,Fe]=s.useState(null),[Re,de]=s.useState(null),[Ae,ue]=s.useState(null);s.useEffect(()=>{T.current||(t(Ve("Create User")),$e(),T.current=!0)},[t]),s.useEffect(()=>{se()},[$,N,I,M]);const $e=async()=>{var n;try{const o=await G.get(ee.roleApi);if(o.data){const g=o.data.map(d=>({value:d.id,label:d.name}));v(g)}}catch(o){((n=o.response)==null?void 0:n.status)===403&&(window.location.href="/error")}},se=async(n=null)=>{var o;try{const g={page:$,per_page:N,sort_field:I.columnAccessor,sort_order:I.direction,search:M,team_id:n},d=await G.get(ee.listApi,{params:g});if(d.data){const _=d.data.data.data||[];i(_);const O=(d.data.heads||[]).map(B=>({value:B.client_user_id,label:l(Je,{children:[" ",B.client_user_name," ",e("span",{className:"badge bg-success rounded-full text-white ml-2",children:B.client_user_designation})]})}));h(O),U(d.data.data.total||0)}}catch(g){((o=g.response)==null?void 0:o.status)===403&&(window.location.href="/error")}},ke=async n=>{var o,g,d;n.preventDefault();try{if(a.current.userformRef){const _=new FormData(a.current.userformRef);F.forEach((B,It)=>{B.file&&(_.append("user_files[]",B.file),_.append("documentType[]",B.documentType||""))});const j=_.get("client_user_id"),O=j?await G.post(`${ee.createApi}/${j}`,_):await G.post(ee.createApi,_);(O.status===200||O.status===201)&&(we(O.data.message),se(),y({}),a.current.userformRef.reset(),w(null),p(null),de(null),ue(null),L(null))}}catch(_){(g=(o=_.response)==null?void 0:o.data)!=null&&g.errors?y(_.response.data.errors):((d=_.response)==null?void 0:d.status)===403&&(window.location.href="/error")}},we=n=>{me.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:n,icon:"success"})},De=async n=>{if(a.current.userformRef){const o=a.current.userformRef;o.reset(),o.client_user_id.value=n.client_user_id||"",o.client_user_name.value=n.client_user_name||"",o.client_user_email.value=n.client_user_email||"",o.client_user_phone.value=n.client_user_phone||"",o.client_user_designation.value=n.client_user_designation||"",o.client_sort_order.value=n.client_sort_order||"",o.client_user_allow_leave.value=n.client_user_allow_leave||"",p(n.client_user_status||""),de(n.client_user_dob||null),ue(n.client_user_joing_date||null),L(n.client_user_type?Number(n.client_user_type):null);const g=n.roles&&n.roles[0];if(g){const j={value:g.id,label:g.name};w(j)}else w(null);const d=n.team;let _=[];d?_=[{value:d.client_user_id,label:d.client_user_name+" ("+d.client_user_designation+")"}]:_=[{value:null,label:"No Team Head"}],S(_)}},Ue=async n=>{var g;if((await me.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"})).isConfirmed)try{const d=await G.delete(ee.destoryApi+`/${n.client_user_id}`);(d.status===200||d.status===201)&&(we("User deleted successfully"),se())}catch(d){((g=d.response)==null?void 0:g.status)===403&&(window.location.href="/error")}},Le=n=>{w(n)},je=n=>{x(n.target.value),k(1)},Oe=n=>{k(n)},Me=n=>{P(n),k(1)},[F,K]=s.useState([{id:1,file:null,documentType:null}]),Be=()=>{const n=F[F.length-1];if(F.length===0){K([{id:1,file:null,documentType:null}]);return}if(!(n!=null&&n.file)||!(n!=null&&n.documentType)){me.fire({icon:"warning",title:"Incomplete Row",text:"Please upload a file and select a document type before adding a new row."});return}const o=F.reduce((g,d)=>d.id>g?d.id:g,0);K([...F,{id:o+1,file:null,documentType:null}])},Ye=(n=null)=>{K(F.filter(o=>o.id!==n.id))},ze=(n,o)=>{var d;const g=(d=n.target.files)==null?void 0:d[0];g&&K(F.map(_=>_.id===o?{..._,file:g}:_))},He=async n=>{Fe(n),Q(!0)},We=n=>{S(n),se(n.value)},Ge=[{accessor:"client_user_id",title:"#",width:80,key:"id"},{accessor:"team.client_user_name",title:"Team Head",sortable:!0,key:"team_id_column"},{accessor:"client_user_name",title:"Name",sortable:!0,key:"client_user_name_column"},{accessor:"client_user_email",title:"Email",sortable:!0,key:"email-column"},{accessor:"actions",title:"Actions",width:120,key:"actions-column",render:n=>l("div",{className:"flex space-x-2",children:[e("button",{type:"button",onClick:()=>He(n),className:"btn px-1 py-0.5 rounded text-white bg-green-600",children:e(et,{})},`view-${n.client_user_id}`),e("button",{type:"button",onClick:()=>De(n),className:"btn px-1 py-0.5 rounded text-white bg-info",children:e(Ke,{})},`edit-${n.client_user_id}`),e("button",{type:"button",onClick:()=>Ue(n),className:"btn px-1 py-0.5 rounded text-white bg-red-600",children:e(Qe,{})},`delete-${n.client_user_id}`)]})}];return l("form",{ref:n=>a.current.userformRef=n,onSubmit:ke,className:"space-y-5",children:[l("div",{className:"flex flex-wrap -mx-4",children:[e("div",{className:"w-full lg:w-1/3 px-4",children:e("div",{className:"panel",children:l("div",{className:"panel-body",children:[e("div",{className:"grid mb-2",children:l("div",{className:"form-group",children:[e("label",{htmlFor:"team_head_id",children:"Assign Team Head"}),e(Z,{name:"team_head_id",placeholder:"Select an Team",options:C||[],value:f,onChange:We,isClearable:!0}),c.team_head_id&&e("span",{className:"text-red-500 text-sm",children:c.team_head_id})]})}),l("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[l("div",{className:"form-group",children:[e("label",{htmlFor:"client_user_name",children:"Username"}),e("input",{name:"client_user_name",type:"text",placeholder:"Username",className:"form-input"}),e("input",{type:"hidden",name:"client_user_id",id:"client_user_id"}),c.client_user_name&&e("span",{className:"text-red-500 text-sm",children:c.client_user_name})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"client_user_phone",children:"Phone"}),e("input",{name:"client_user_phone",type:"tel",placeholder:"Phone",className:"form-input"}),c.client_user_phone&&e("span",{className:"text-red-500 text-sm",children:c.client_user_phone})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"client_user_designation",children:"Designation"}),e("input",{name:"client_user_designation",type:"text",placeholder:"Designation",className:"form-input"}),c.client_user_designation&&e("span",{className:"text-red-500 text-sm",children:c.client_user_designation})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"client_user_email",children:"Email"}),e("input",{name:"client_user_email",type:"email",placeholder:"Email",className:"form-input"}),c.client_user_email&&e("span",{className:"text-red-500 text-sm",children:c.client_user_email})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{name:"password",type:"password",placeholder:"Password",className:"form-input"}),c.password&&e("span",{className:"text-red-500 text-sm",children:c.password})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"client_user_status",children:"Status"}),e(Z,{name:"client_user_status",placeholder:"Select an option",options:ge,value:ge.find(n=>n.value===u),onChange:n=>p((n==null?void 0:n.value)||null)}),c.client_user_status&&l("span",{className:"text-red-500 text-sm",children:[" ",c.client_user_status," "]})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"client_sort_order",children:"Sort Order"}),e("input",{name:"client_sort_order",type:"text",placeholder:"Sort Order",className:"form-input"}),c.client_sort_order&&l("span",{className:"text-red-500 text-sm",children:[" ",c.client_sort_order," "]})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"role_id",children:"Role"}),e(Z,{name:"role_id",placeholder:"Select an option",options:m||[],value:b,onChange:Le}),c.role_id&&l("span",{className:"text-red-500 text-sm",children:[" ",c.role_id," "]})]})]}),l("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mt-4",children:[l("div",{className:"form-group",children:[e("label",{htmlFor:"client_user_dob",children:"Date of Birth"}),e(Ne,{name:"client_user_dob",value:Re,options:{dateFormat:"Y-m-d"},className:"form-input",placeholder:"Y-m-d",onChange:n=>{de(n[0])}}),c.client_user_dob&&l("span",{className:"text-red-500 text-sm",children:[" ",c.client_user_dob," "]})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"client_user_joing_date",children:"Joing Date"}),e(Ne,{value:Ae,options:{dateFormat:"Y-m-d"},name:"client_user_joing_date",className:"form-input",placeholder:"Y-m-d",onChange:n=>ue(n[0])}),c.client_user_joing_date&&e("span",{className:"text-red-500 text-sm",children:c.client_user_joing_date})]}),l("div",{className:"form-group",children:[e("label",{htmlFor:"client_user_type",children:"Type"}),e(Z,{name:"client_user_type",placeholder:"Employee Type",options:_e,value:_e.find(n=>n.value===E),onChange:n=>L((n==null?void 0:n.value)||null)}),c.client_user_type&&e("span",{className:"text-red-500 text-sm",children:c.client_user_type})]}),l("div",{className:"form-group sm:col-span-3 mt-2",children:[e("input",{name:"client_user_allow_leave",type:"number",placeholder:"Allow Leave",className:"form-input"}),c.client_user_allow_leave&&l("span",{className:"text-red-500 text-sm",children:[" ",c.client_user_allow_leave," "]})]})]}),l("div",{className:"mt-8",children:[e("div",{className:"table-responsive",children:l("table",{children:[e("thead",{children:l("tr",{children:[e("th",{children:"File"}),e("th",{className:"w-1",children:"File Name"}),e("th",{className:"w-1"})]})}),l("tbody",{children:[F.length<=0&&l("tr",{children:[" ",e("td",{colSpan:5,className:"!text-center font-semibold",children:" No Item Available "})," "]}),F.map(n=>l("tr",{className:"align-top",children:[e("td",{children:e("div",{className:"relative inline-block",children:l("label",{className:"cursor-pointer inline-block bg-gray-200 text-gray-800 text-sm font-medium px-4 py-2 rounded-md shadow hover:bg-gray-300 transition min-w-[200px]",children:["Upload File",e("input",{type:"file",className:"hidden",onChange:o=>ze(o,n.id)})]})})}),e("td",{children:e("div",{className:"relative z-[100]",children:e(Z,{placeholder:"Document Type",options:be,value:be.find(o=>o.value===n.documentType),onChange:o=>K(F.map(g=>g.id===n.id?{...g,documentType:(o==null?void 0:o.value)||null}:g)),className:"min-w-[200px]",menuPortalTarget:document.body,styles:{menuPortal:o=>({...o,zIndex:9999}),menu:o=>({...o,zIndex:9999})}})})}),e("td",{children:l("button",{type:"button",onClick:()=>Ye(n),children:[" ",e(Xe,{className:"w-5 h-5"})," "]})})]},n.id))]})]})}),e("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>Be(),children:" + "})})})]}),e("div",{className:"sm:col-span-2 flex justify-end mt-4",children:e("button",{type:"submit",className:"btn btn-primary",children:" Submit "})})]})})}),l("div",{className:"w-full lg:w-2/3 px-2 mt-6 lg:mt-0 md-mt-0",children:[e("div",{className:"mb-6",children:e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(n=>{const o=r.filter(d=>{var _;return((_=d.team)==null?void 0:_.client_user_id)===n.value}).length,g=r.reduce((d,_)=>{var j;if(((j=_.team)==null?void 0:j.client_user_id)===n.value){const O=_.client_user_designation;d[O]=(d[O]||0)+1}return d},{});return e("div",{className:"panel",children:l("div",{className:"panel-body flex flex-col justify-between min-h-[120px]",children:[e("h5",{className:"font-semibold mb-2",children:n.label}),e("div",{className:"text-sm flex-grow",children:e("div",{className:"flex flex-wrap gap-2 min-h-[40px]",children:Object.entries(g).map(([d,_])=>l("span",{className:"badge badge-info",children:[d," : ",_||0]},d))})}),l("p",{className:"text-sm text-right mt-2",children:[" Total Members: ",e("span",{className:"bg-secondary badge",children:o})]})]})},n.value)})})}),e("div",{className:"datatables",children:e(Ze,{columns:Ge,rows:r,title:"List of all Users",idAccessor:"client_user_id",totalRecords:D,currentPage:$,recordsPerPage:N,onPageChange:Oe,onRecordsPerPageChange:Me,onSortChange:X,onSearchChange:je,sortStatus:I,isLoading:!1,minHeight:200,noRecordsText:"No users found",searchValue:M})})]})]}),e(Pt,{isOpen:oe,onClose:()=>Q(!1),user:ce})]})};export{qt as default};
