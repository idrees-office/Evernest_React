import{R as Z,r as l,X as re,ag as se,c as oe,T as ce,j as e,a as i,d as B,Y as le}from"./index-41d98de4.js";/* empty css                  */import{F as de}from"./index-f5c93a6e.js";/* empty css                  */function me(t){const c=parseFloat(t);return!isNaN(c)&&isFinite(c)}function G(t){return typeof t=="string"&&t[t.length-1]==="%"&&me(t.substring(0,t.length-1))}function Y(t,c,y){c===0&&!y&&(t!=null&&t.style)&&(t==null?void 0:t.children.length)>0&&(t.style.display="none")}function ue(t,c){c===0&&(t!=null&&t.style)&&(t.style.display="")}const he={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"};function J(t,c){return[t.static,c===0&&t.staticHeightZero,typeof c=="number"&&c>0?t.staticHeightSpecific:null,c==="auto"&&t.staticHeightAuto].filter(y=>y).join(" ")}const fe=["animateOpacity","animationStateClasses","applyInlineTransitions","children","className","contentClassName","contentRef","delay","duration","easing","height","onHeightAnimationEnd","onHeightAnimationStart","style","disableDisplayNone"],z=Z.forwardRef((t,c)=>{const{animateOpacity:y=!1,animationStateClasses:K={},applyInlineTransitions:m=!0,children:x,className:C="",contentClassName:r,delay:b=0,disableDisplayNone:T=!1,duration:D=500,easing:S="ease",height:n,onHeightAnimationEnd:f,onHeightAnimationStart:g,style:p,contentRef:E}=t,k=Object.assign({},t);fe.forEach(w=>{delete k[w]});const v=l.useRef(n),u=l.useRef(null),o=l.useRef(),s=l.useRef(),a=l.useRef(Object.assign(Object.assign({},he),K)),N=typeof window<"u",A=l.useRef(N&&window.matchMedia?window.matchMedia("(prefers-reduced-motion)").matches:!1),j=A.current?0:b,R=A.current?0:D;let _=n,F="visible";typeof n=="number"?(_=n<0?0:n,F="hidden"):G(_)&&(_=n==="0%"?0:n,F="hidden");const[P,I]=l.useState(_),[Q,U]=l.useState(F),[ee,O]=l.useState(!1),[te,L]=l.useState(J(a.current,n));l.useEffect(()=>{Y(u.current,P,T)},[]),l.useEffect(()=>{if(n!==v.current&&u.current){ue(u.current,v.current),u.current.style.overflow="hidden";const w=u.current.offsetHeight;u.current.style.overflow="";const V=R+j;let h,d,M="hidden",X;const W=v.current==="auto";typeof n=="number"?(h=n<0?0:n,d=h):G(n)?(h=n==="0%"?0:n,d=h):(h=w,d="auto",M=void 0),W&&(d=h,h=w);const ne=[a.current.animating,(v.current==="auto"||n<v.current)&&a.current.animatingUp,(n==="auto"||n>v.current)&&a.current.animatingDown,d===0&&a.current.animatingToHeightZero,d==="auto"&&a.current.animatingToHeightAuto,typeof d=="number"&&d>0?a.current.animatingToHeightSpecific:null].filter(ie=>ie).join(" "),q=J(a.current,d);I(h),U("hidden"),O(!W),L(ne),clearTimeout(s.current),clearTimeout(o.current),W?(X=!0,s.current=setTimeout(()=>{I(d),U(M),O(X),g==null||g(d)},50),o.current=setTimeout(()=>{O(!1),L(q),Y(u.current,d,T),f==null||f(d)},V)):(g==null||g(h),s.current=setTimeout(()=>{I(d),U(M),O(!1),L(q),n!=="auto"&&Y(u.current,h,T),f==null||f(h)},V))}return v.current=n,()=>{clearTimeout(s.current),clearTimeout(o.current)}},[n]);const H=Object.assign(Object.assign({},p),{height:P,overflow:Q||(p==null?void 0:p.overflow)});ee&&m&&(H.transition=`height ${R}ms ${S} ${j}ms`,p!=null&&p.transition&&(H.transition=`${p.transition}, ${H.transition}`),H.WebkitTransition=H.transition);const $={};y&&($.transition=`opacity ${R}ms ${S} ${j}ms`,$.WebkitTransition=$.transition,P===0&&($.opacity=0));const ae=typeof k["aria-hidden"]<"u"?k["aria-hidden"]:n===0;return Z.createElement("div",Object.assign({},k,{"aria-hidden":ae,className:`${te} ${C}`,style:H,ref:c}),Z.createElement("div",{className:r,style:$,ref:w=>{u.current=w,E&&(E.current=w)}},x))}),pe={createApi:`${re()}/subscriber/send-campaign`},we=()=>{const t=se();oe();const c=ce(),{htmlCode:y,cssCode:K}=t.state||{htmlCode:"",cssCode:""},[m,x]=l.useState("1"),C=l.useRef({emailform:null}),[r,b]=l.useState({}),[T,D]=l.useState(!1),[S,n]=l.useState(""),f=o=>{x(s=>s===o?"":o)},g=()=>y,p=async o=>{if(o.preventDefault(),C.current.emailform){const s=new FormData(C.current.emailform);if(s.append("body",g()),s.append("schedule_at",S),!s.has("send_to_all")){c.error("Please select at least one subscriber to send the email."),b({send_to_all:["Please select at least one subscriber to send the email."]}),x("1");return}try{const a=await le.post(pe.createApi,s);c.success(a.data.message)}catch(a){if(a.response&&a.response.status===422){x("2"),b(a.response.data);const N=a.response.data;for(const A in N)N.hasOwnProperty(A)&&N[A].forEach(j=>{c.error(j)})}}}},E=o=>{const a=o.target.name;r[a]&&b(N=>({...N,[a]:""}))},k=o=>{const a=o.target.name;r[a]&&b(N=>({...N,[a]:""}))},v=o=>{const s=o.target.checked;s&&n(""),b(a=>({...a,sendNow:"",date:s?"":a.date})),D(s),!s&&!S&&(b(a=>({...a,date:["Please select a date for scheduled sending"]})),x("3"))},u=o=>{D(!1);const s=o[0];n(s),b(a=>({...a,date:""}))};return e("div",{children:e("div",{className:"min-h-screen p-2 sm:p-4",children:i("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 min-h-[calc(100vh-200px)]",children:[i("div",{className:"md:col-span-8 panel p-3 sm:p-4 border rounded bg-white shadow h-[calc(100vh-140px)] md:h-[calc(100vh-140px)] overflow-auto",children:[e("h2",{className:"text-lg font-bold mb-3",children:"HTML Code"}),e("div",{className:"mb-5",children:i("form",{className:"emailform",ref:o=>C.current.emailform=o,onSubmit:p,onKeyUp:E,children:[i("div",{className:"space-y-2 font-semibold",children:[i("div",{className:`border rounded ${r.send_to_all?"border-red-400":"border-[#d3d3d3] dark:border-[#1b2e4b]"}`,children:[i("button",{type:"button",className:`p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] ${m==="1"?"!text-primary":""}`,onClick:()=>f("1"),children:["To, Who are you sending this email to?",e("div",{className:`ltr:ml-auto rtl:mr-auto ${m==="1"?"rotate-180":""}`,children:e(B,{})})]}),e("div",{children:e(z,{duration:300,height:m==="1"?"auto":0,children:e("div",{className:"space-y-2 p-4 text-white-dark text-[13px] border-t border-[#d3d3d3] dark:border-[#1b2e4b]",children:e("div",{className:"mb-3",children:i("label",{className:"inline-flex",children:[e("input",{type:"checkbox",name:"send_to_all",className:"form-checkbox text-secondary rounded-full peer"}),e("span",{className:"peer-checked:text-secondary",children:"Send Email to All Subscribers"})]})})})})})]}),i("div",{className:`border rounded ${r.name||r.subject||r.email?"border-red-400":"border-[#d3d3d3] dark:border-[#1b2e4b]"}`,children:[i("button",{type:"button",className:`p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] ${m==="2"?"!text-primary":""}`,onClick:()=>f("2"),children:[" From: Who is sending this email?",i("div",{className:`ltr:ml-auto rtl:mr-auto ${m==="2"?"rotate-180":""}`,children:[" ",e(B,{})," "]})]}),e("div",{children:e(z,{duration:300,height:m==="2"?"auto":0,children:i("div",{className:"space-y-2 p-4 text-white-dark text-[13px] border-t border-[#d3d3d3] dark:border-[#1b2e4b]",children:[i("div",{className:"mb-3",children:[e("label",{htmlFor:"name",children:"Campaign Name "}),e("input",{id:"name",type:"text",name:"name",placeholder:"(Like) Banglore Roadshow 06052025 Post",className:"form-input",autoComplete:"off"}),r.name&&e("span",{className:"text-red-500 text-sm",children:r.name})]}),i("div",{className:"mb-3",children:[e("label",{htmlFor:"subject",children:"Subject "}),e("input",{id:"subject",type:"text",name:"subject",placeholder:"Email Subject",className:"form-input",autoComplete:"off"}),r.subject&&e("span",{className:"text-red-500 text-sm",children:r.subject})]}),i("div",{className:"mb-3",children:[e("label",{htmlFor:"from_email",children:"Email "}),i("select",{id:"from_email",name:"from_email",className:"form-select",defaultValue:"",onChange:k,children:[e("option",{value:"",disabled:!0,children:"Select Email"}),e("option",{value:"evernestre@gmail.com",children:"evernestre@gmail.com"}),e("option",{value:"info@evernestre.ae",children:"info@evernestre.ae"})]}),r.from_email&&e("span",{className:"text-red-500 text-sm",children:r.from_email})]})]})})})]}),i("div",{className:`border rounded ${r.sendNow||r.date?"border-red-400":"border-[#d3d3d3] dark:border-[#1b2e4b]"}`,children:[i("button",{type:"button",className:`p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] ${m==="3"?"!text-primary":""}`,onClick:()=>f("3"),children:[" Send Options",e("div",{className:`ltr:ml-auto rtl:mr-auto ${m==="3"?"rotate-180":""}`,children:e(B,{})})]}),e("div",{children:e(z,{duration:300,height:m==="3"?"auto":0,children:i("div",{className:"p-4 text-[13px] border-t border-[#d3d3d3] dark:border-[#1b2e4b]",children:[i("div",{className:"space-y-4 p-4 text-white-dark text-[13px] border-t border-[#d3d3d3] dark:border-[#1b2e4b]",children:[i("div",{className:"flex items-center justify-between mb-3",children:[e("label",{htmlFor:"sendNow",className:"mr-2",style:{cursor:"pointer"},children:e("h1",{children:"Send Now"})}),e("input",{id:"sendNow",type:"checkbox",name:"sendNow",className:"form-checkbox",onChange:v})]}),r.sendNow&&e("span",{className:"text-red-500 text-sm",children:r.sendNow}),e("hr",{}),i("div",{className:"mt-4",children:[e("label",{htmlFor:"slugmark",className:"text-white-dark",children:" Date"}),e(de,{value:S,name:"scheduled_at",options:{dateFormat:"Y-m-d H:i",enableTime:!0},className:"form-input",onChange:u,disabled:T,placeholder:"Y-m-d H:i"}),r.date&&e("span",{className:"text-red-500 text-sm",children:r.date})]})]}),e("hr",{})]})})})]})]}),e("div",{className:"mb-3",children:e("button",{type:"submit",className:"mt-3 btn btn-secondary text-white rounded",children:" Send "})})]})})]}),i("div",{className:"md:col-span-4 panel p-3 sm:p-4 border rounded bg-white shadow h-[50vh] md:h-[calc(100vh-140px)]",children:[e("h2",{className:"text-lg font-bold mb-3",children:"Live Preview"}),e("div",{className:"h-[calc(100%-2rem)]",children:e("iframe",{title:"preview",className:"w-full h-full border rounded",srcDoc:g(),scrolling:"no",seamless:!0,style:{width:"100%",height:"100%",border:"none"}})})]})]})})})};export{we as default};
