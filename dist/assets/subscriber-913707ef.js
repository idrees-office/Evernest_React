import{W as N,u as S,r as s,T as w,j as e,a as r,G as I,X as x,al as k,c as F}from"./index-d310ceb4.js";import{I as C}from"./IconBell-c07f5595.js";import{I as T}from"./IconPlus-37e82ef7.js";import{Y as h,y as g}from"./transition-4381d79f.js";/* empty css                  */import{T as A}from"./Table-58373652.js";import{I as P}from"./IconPencil-add627f8.js";import{I as j}from"./IconTrashLines-000e8792.js";import"./index-83ebb848.js";import"./floating-ui.dom.browser.min-b8726d47.js";import"./extends-4c19d496.js";import"./_baseIsEqual-53fbb2e7.js";const E={createApi:`${N()}/subscriber/store`},D=({isOpen:n,onClose:l,onSuccess:d})=>{S();const[t,i]=s.useState({}),c=s.useRef({subscriberform:null}),p=w(),[f,u]=s.useState([]),[v,a]=s.useState();s.useEffect(()=>{n&&i({});const o=JSON.parse(localStorage.getItem("permissions")||"[]"),b=localStorage.getItem("role")||"";u(o),a(b)},[n]);const y=async o=>{if(o.preventDefault(),c.current.subscriberform){const b=new FormData(c.current.subscriberform);try{const m=await x.post(E.createApi,b);if(m.status===200||m.status===201)p.success("Lead Create Successfully"),l(),i({}),c.current.subscriberform.reset(),d();else return}catch(m){m.response.status===422&&i(m.response.data||{})}}};return e(h,{appear:!0,show:n,as:s.Fragment,children:r(g,{as:"div",open:n,onClose:l,className:"relative z-[51]",children:[e(h.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(h.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:r(g.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:l,className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(I,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:" Add Subscrber Infomation..."}),e("div",{className:"p-5",children:r("form",{className:"leadForm",ref:o=>c.current.subscriberform=o,onSubmit:y,children:[r("div",{className:"mb-3",children:[e("label",{htmlFor:"name",children:"Name "}),e("input",{id:"name",type:"text",placeholder:"Full Name",name:"name",className:"form-input"}),(t==null?void 0:t.name)&&e("p",{className:"text-danger error",children:t.name[0]})]}),r("div",{className:"mb-3",children:[e("label",{htmlFor:"email",children:"Email "}),e("input",{id:"email",type:"text",name:"email",placeholder:"john@gmail.com",className:"form-input"}),(t==null?void 0:t.email)&&e("p",{className:"text-danger error",children:t.email[0]})]}),r("div",{className:"mb-3",children:[e("label",{htmlFor:"phone",children:"Phone"}),e("input",{id:"text",type:"text",name:"phone",placeholder:"Phone",className:"form-input"}),(t==null?void 0:t.phone)&&e("p",{className:"text-danger error",children:t.phone[0]})]}),r("div",{className:"ltr:text-right rtl:text-left flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:l,children:" Cancel "}),e("button",{type:"submit",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:"Save"})]})]})})]})})})})]})})},L={listApi:`${N()}/subscriber/show`},_=()=>{const n=k();F(),n.state;const[l,d]=s.useState(!1);s.useState(!1);const t=s.useRef(!1),[i,c]=s.useState([]);s.useEffect(()=>{t.current==!1&&u(),t.current=!0});const p=()=>{d(!0)},f=(Array.isArray(i)?i:[]).map((a,y)=>({id:a.id,name:a.name,email:a.email,phone:a.phone,source:a.status})),u=async()=>{const a=await x.get(L.listApi);(a.status===200||a.status===201)&&c(a.data)};return r("div",{children:[r("div",{className:"panel flex items-center justify-between overflow-visible whitespace-nowrap p-3 text-dark relative",children:[r("div",{className:"flex items-center",children:[e("div",{className:"rounded-full bg-primary p-1.5 text-white ring-2 ring-primary/30 ltr:mr-3 rtl:ml-3",children:e(C,{})}),e("span",{className:"ltr:mr-3 rtl:ml-3",children:"Details of Your Email Subscriber: "}),r("button",{onClick:async()=>{window.open("http://127.0.0.1:8000/add-subscriber","_blank")},className:"btn btn-primary btn-sm",children:[" "," ",e(T,{})," Import Contact"," "," "]})]}),e("div",{className:"",children:e("button",{className:"btn btn-primary btn-sm",type:"button",onClick:p,children:" Create Single "})})]}),e("div",{className:"datatables mt-6",children:e(A,{title:"List of all users:",columns:[{accessor:"id",title:"#",sortable:!0},{accessor:"name",title:"Name",sortable:!0},{accessor:"email",title:"Email",sortable:!0},{accessor:"phone",title:"Phone",sortable:!0},{accessor:"source",title:"Source",sortable:!0,render:a=>{switch(a.source){case 1:return e("span",{className:"badge bg-success",children:"Subscriber"});case 2:return e("span",{className:"badge bg-secondary",children:"Inactive"});case 3:return e("span",{className:"badge bg-danger",children:"Unsubscribed"});default:return e("span",{className:"badge bg-light",children:"Unknown"})}}},{accessor:"action",title:"Action",sortable:!0,render:a=>r("div",{className:"flex space-x-2",children:[e("button",{type:"button",className:"btn px-1 py-0.5 rounded text-white bg-info",children:e(P,{})}),e("button",{type:"button",className:"btn px-1 py-0.5 rounded text-white",style:{background:"#d33",color:"#fff"},children:e(j,{})})]})}],rows:f})}),e(D,{isOpen:l,onClose:()=>d(!1),onSuccess:u})]})};export{_ as default};
