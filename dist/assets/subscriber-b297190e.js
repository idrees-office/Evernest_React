import{Y as N,u as x,r as s,T as S,j as e,a as r,G as w,Z as v,al as I,c as k}from"./index-0bb52949.js";import{I as F}from"./IconBell-55ab01d4.js";import{I as C}from"./IconPlus-67bd4b8b.js";import{Y as b,y as g}from"./transition-9b61862c.js";/* empty css                  */import{T}from"./Table-61286b5a.js";import{I as A}from"./IconPencil-82647562.js";import{I as P}from"./IconTrashLines-57ed45ca.js";import"./index-3ad07d42.js";import"./floating-ui.dom.browser.min-b8726d47.js";import"./extends-4c19d496.js";import"./_baseIsEqual-25423c2b.js";const j={createApi:`${N()}/subscriber/store`},E=({isOpen:l,onClose:i})=>{x();const[t,c]=s.useState({}),n=s.useRef({subscriberform:null}),d=S(),[h,u]=s.useState([]),[f,y]=s.useState();s.useEffect(()=>{l&&c({});const o=JSON.parse(localStorage.getItem("permissions")||"[]"),p=localStorage.getItem("role")||"";u(o),y(p)},[l]);const a=async o=>{if(o.preventDefault(),n.current.subscriberform){const p=new FormData(n.current.subscriberform);try{const m=await v.post(j.createApi,p);if(m.status===200||m.status===201)d.success("Lead Create Successfully"),i(),c({}),n.current.subscriberform.reset();else return}catch(m){m.response.status===422&&c(m.response.data||{})}}};return e(b,{appear:!0,show:l,as:s.Fragment,children:r(g,{as:"div",open:l,onClose:i,className:"relative z-[51]",children:[e(b.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(b.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:r(g.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:i,className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(w,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:" Add Subscrber Infomation..."}),e("div",{className:"p-5",children:r("form",{className:"leadForm",ref:o=>n.current.subscriberform=o,onSubmit:a,children:[r("div",{className:"mb-3",children:[e("label",{htmlFor:"name",children:"Name "}),e("input",{id:"name",type:"text",placeholder:"Full Name",name:"name",className:"form-input"}),(t==null?void 0:t.name)&&e("p",{className:"text-danger error",children:t.name[0]})]}),r("div",{className:"mb-3",children:[e("label",{htmlFor:"email",children:"Email "}),e("input",{id:"email",type:"text",name:"email",placeholder:"john@gmail.com",className:"form-input"}),(t==null?void 0:t.email)&&e("p",{className:"text-danger error",children:t.email[0]})]}),r("div",{className:"mb-3",children:[e("label",{htmlFor:"phone",children:"Phone"}),e("input",{id:"text",type:"text",name:"phone",placeholder:"Phone",className:"form-input"}),(t==null?void 0:t.phone)&&e("p",{className:"text-danger error",children:t.phone[0]})]}),r("div",{className:"ltr:text-right rtl:text-left flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:i,children:" Cancel "}),e("button",{type:"submit",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:"Save"})]})]})})]})})})})]})})},D={listApi:`${N()}/subscriber/show`},Z=()=>{const l=I();k(),l.state;const[i,t]=s.useState(!1);s.useState(!1);const c=s.useRef(!1),[n,d]=s.useState([]);s.useEffect(()=>{c.current==!1&&f(),c.current=!0});const h=()=>{t(!0)},u=(Array.isArray(n)?n:[]).map((a,o)=>({id:a.id,name:a.name,email:a.email,phone:a.phone,source:a.status})),f=async()=>{const a=await v.get(D.listApi);(a.status===200||a.status===201)&&d(a.data)};return r("div",{children:[r("div",{className:"panel flex items-center justify-between overflow-visible whitespace-nowrap p-3 text-dark relative",children:[r("div",{className:"flex items-center",children:[e("div",{className:"rounded-full bg-primary p-1.5 text-white ring-2 ring-primary/30 ltr:mr-3 rtl:ml-3",children:e(F,{})}),e("span",{className:"ltr:mr-3 rtl:ml-3",children:"Details of Your Email Subscriber: "}),r("button",{onClick:async()=>{window.open("http://127.0.0.1:8000/add-subscriber","_blank")},className:"btn btn-primary btn-sm",children:[" "," ",e(C,{})," Import Contact"," "," "]})]}),e("div",{className:"",children:e("button",{className:"btn btn-primary btn-sm",type:"button",onClick:h,children:" Create Single "})})]}),e("div",{className:"datatables mt-6",children:e(T,{title:"List of all users:",columns:[{accessor:"id",title:"#",sortable:!0},{accessor:"name",title:"Name",sortable:!0},{accessor:"email",title:"Email",sortable:!0},{accessor:"phone",title:"Phone",sortable:!0},{accessor:"source",title:"Source",sortable:!0,render:a=>{switch(a.source){case"active":return e("span",{className:"badge bg-success",children:"Subscriber"});case"inactive":return e("span",{className:"badge bg-secondary",children:"Inactive"});case"unsubscribed":return e("span",{className:"badge bg-danger",children:"Unsubscribed"});default:return e("span",{className:"badge bg-light",children:"Unknown"})}}},{accessor:"action",title:"Action",sortable:!0,render:a=>r("div",{className:"flex space-x-2",children:[e("button",{type:"button",className:"btn px-1 py-0.5 rounded text-white bg-info",children:e(A,{})}),e("button",{type:"button",className:"btn px-1 py-0.5 rounded text-white",style:{background:"#d33",color:"#fff"},children:e(P,{})})]})}],rows:u})}),e(E,{isOpen:i,onClose:()=>t(!1)})]})};export{Z as default};
