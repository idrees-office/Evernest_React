import{W as i,u as D,r as n,s as $,X as l,S as b,j as s,a as c}from"./index-fe5baaac.js";const m={listApi:`${i()}/users/get_user_role`,createApi:`${i()}/users/create_role`,destoryApi:`${i()}/users/delete_role`,updateApi:`${i()}/users/update_role`},B=()=>{const E=D();n.useState([{value:"1",name:"Active"},{value:"0",name:"Inactive"}]);const[d,C]=n.useState([]),[a,p]=n.useState({id:"",name:""});n.useEffect(()=>{E($("Create Role")),u()},[]),(Array.isArray(d)?d:[]).map((e,t)=>({id:e.id||"Unknown",name:e.name||"Unknown",role:e||"Unknown"}));const u=async()=>{var e;try{const t=await l.get(m.listApi);t.data&&C(t.data)}catch(t){((e=t.response)==null?void 0:e.status)===403&&(window.location.href="/error"),g("Something wrong on server")}},[f,h]=n.useState({}),U=e=>{p({...a,[e.target.name]:e.target.value})},_=async e=>{var w,v,x,y,N,S,A;e.preventDefault();const t=!!a.id;let o;t===!0?o=await l.post(m.updateApi+"/"+a.id,a):o=await l.post(m.createApi,a);try{(o.status===200||o.status===201)&&(j(o.data.message),p({id:"",name:""}),u(),h({}))}catch(r){console.log("ddd"),console.log(r),((w=r.response)==null?void 0:w.status)===422&&console.log("Validation Errors:",(x=(v=r.response)==null?void 0:v.data)==null?void 0:x.errors),(N=(y=r.response)==null?void 0:y.data)!=null&&N.errors?h(r.response.data.errors):g(((A=(S=r.response)==null?void 0:S.data)==null?void 0:A.message)||"An error occurred")}},j=e=>{b.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:e,icon:"success"})},g=e=>{b.fire({text:e,icon:"error",title:"Server Error"})};return s("form",{onSubmit:_,className:"space-y-5",children:c("div",{className:"flex flex-wrap -mx-4",children:[s("div",{className:"w-full lg:w-1/3 px-4",children:s("div",{className:"panel",children:c("div",{className:"panel-body",children:[c("div",{className:"form-group",children:[s("label",{htmlFor:"name",children:"Name"}),s("input",{name:"name",type:"text",placeholder:"Name",className:"form-input",value:a.name,onChange:U}),f.name&&s("span",{className:"text-red-500 text-sm",children:f.name[0]})]}),s("div",{className:"sm:col-span-2 flex justify-end mt-3",children:s("button",{type:"submit",className:"btn btn-primary w-full sm:w-auto",children:" Submit "})})]})})}),s("div",{className:"w-full lg:w-2/3 px-2 mt-6 lg:mt-0 md-mt-0"})]})})};export{B as default};
