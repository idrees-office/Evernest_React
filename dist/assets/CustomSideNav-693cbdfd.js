import{r as o,a as A,T as C,Y as p,j as a,b as t,_ as j,A as F}from"./index-0676b19a.js";import{S as v}from"./react-select.esm-1f13a092.js";import{s as P}from"./status-4b816717.js";const M=({isOpen:n,onClose:s,onFilterUpdate:u,initialFilters:g,leadId:c,onSuccess:m})=>{var x;const[l,b]=o.useState(g.agents),[i,h]=o.useState(g.statuses);A(e=>e.themeConfig);const[d,N]=o.useState([]),r=C();o.useEffect(()=>{n&&k()},[n]);const k=async()=>{try{const e=await p.get("/users/user_list?for_select=1");N(e.data)}catch{r.error("Failed to fetch agents")}},f=(d==null?void 0:d.map(e=>({value:e.client_user_id,label:e.client_user_name})))||[{value:"",label:"No agents available"}],y=(x=P())==null?void 0:x.map(e=>({value:e.value.toString(),label:e.label})),w=async()=>{if(l.length===0&&i.length===0){r.error("Please select at least one agent or status");return}if(l.length>0&&i.length===0&&c)try{(await p.post("/leads/direct_assignlead_agent",{lead_id:c,agent_id:l})).status===200?(r.success("Lead assigned successfully"),s(),m&&m()):r.error("Failed to assign lead")}catch{r.error("Failed to assign lead")}else u({agents:l,statuses:i})},S=()=>{b([]),h([]),u({agents:[],statuses:[]}),s()};return a("div",{className:"relative",children:[n&&t("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 transition-opacity duration-300",onClick:s}),a("nav",{className:`fixed top-0 bottom-0 w-full max-w-md shadow-xl transition-all duration-300 z-[51] dark:bg-gray-900 bg-white ${n?"right-0":"-right-full"}`,children:[t("button",{type:"button",className:"absolute -left-12 top-1/2 -translate-y-1/2 w-12 h-12 bg-blue-600 hover:bg-blue-700 rounded-l-full flex justify-center items-center text-white cursor-pointer transition-colors duration-200",onClick:s,children:t(j,{className:"w-5 h-5"})}),a("div",{className:"h-full flex flex-col",children:[a("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[t("h4",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:" Filter Leads Analysis ..."}),a("button",{type:"button",className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400",onClick:s,children:[" ",t(F,{className:"w-5 h-5"})]})]}),a("div",{className:"flex-1 overflow-y-auto p-6",children:[a("div",{className:"mb-6",children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" Select Agents "}),t(v,{isMulti:!1,options:f,value:f.find(e=>l[0]===e.value),onChange:e=>b(e?[e.value]:[]),className:"react-select-container",classNamePrefix:"react-select"})]}),!c&&a("div",{className:"mb-6",children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" Select Statuses "}),t(v,{isMulti:!0,options:y,value:y.filter(e=>i.includes(e.value)),onChange:e=>h(e.map(_=>_.value)),className:"react-select-container",classNamePrefix:"react-select"})]})]}),a("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[t("button",{className:"px-4 py-2 rounded-md text-white font-medium transition-colors duration-200 bg-gray-500 hover:bg-gray-600 btn-sm",onClick:S,children:" Reset Changes "}),t("button",{className:"px-4 py-2 rounded-md text-white font-medium transition-colors duration-200 bg-blue-600 hover:bg-blue-700 btn-sm",onClick:w,children:" Apply  Changes "})]})]})]})]})};export{M as C};
