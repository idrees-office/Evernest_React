import{W as x,u as S,r as a,T as w,j as e,a as s,G as F,X as N,al as k,c as C}from"./index-fe5baaac.js";import{I}from"./IconBell-d99e5090.js";import{I as j}from"./IconPlus-eedb2f6d.js";import{Y as h,y as v}from"./transition-f432e32a.js";/* empty css                  */const A={createApi:`${x()}/subscriber/store`},T=({isOpen:l,onClose:n,onSuccess:d})=>{S();const[t,i]=a.useState({}),c=a.useRef({subscriberform:null}),u=w(),[p,f]=a.useState([]),[r,y]=a.useState();a.useEffect(()=>{l&&i({});const o=JSON.parse(localStorage.getItem("permissions")||"[]"),b=localStorage.getItem("role")||"";f(o),y(b)},[l]);const g=async o=>{if(o.preventDefault(),c.current.subscriberform){const b=new FormData(c.current.subscriberform);try{const m=await N.post(A.createApi,b);if(m.status===200||m.status===201)u.success("Lead Create Successfully"),n(),i({}),c.current.subscriberform.reset(),d();else return}catch(m){m.response.status===422&&i(m.response.data||{})}}};return e(h,{appear:!0,show:l,as:a.Fragment,children:s(v,{as:"div",open:l,onClose:n,className:"relative z-[51]",children:[e(h.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(h.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s(v.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:n,className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(F,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:" Add Subscrber Infomation..."}),e("div",{className:"p-5",children:s("form",{className:"leadForm",ref:o=>c.current.subscriberform=o,onSubmit:g,children:[s("div",{className:"mb-3",children:[e("label",{htmlFor:"name",children:"Name "}),e("input",{id:"name",type:"text",placeholder:"Full Name",name:"name",className:"form-input"}),(t==null?void 0:t.name)&&e("p",{className:"text-danger error",children:t.name[0]})]}),s("div",{className:"mb-3",children:[e("label",{htmlFor:"email",children:"Email "}),e("input",{id:"email",type:"text",name:"email",placeholder:"john@gmail.com",className:"form-input"}),(t==null?void 0:t.email)&&e("p",{className:"text-danger error",children:t.email[0]})]}),s("div",{className:"mb-3",children:[e("label",{htmlFor:"phone",children:"Phone"}),e("input",{id:"text",type:"text",name:"phone",placeholder:"Phone",className:"form-input"}),(t==null?void 0:t.phone)&&e("p",{className:"text-danger error",children:t.phone[0]})]}),s("div",{className:"ltr:text-right rtl:text-left flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:n,children:" Cancel "}),e("button",{type:"submit",className:"btn btn-primary ltr:ml-4 rtl:mr-4",children:"Save"})]})]})})]})})})})]})})},E={listApi:`${x()}/subscriber/show`},$=()=>{const l=k();C(),l.state;const[n,d]=a.useState(!1);a.useState(!1);const t=a.useRef(!1),[i,c]=a.useState([]);a.useEffect(()=>{t.current==!1&&p(),t.current=!0});const u=()=>{d(!0)};(Array.isArray(i)?i:[]).map((r,y)=>({id:r.id,name:r.name,email:r.email,phone:r.phone,source:r.status}));const p=async()=>{const r=await N.get(E.listApi);(r.status===200||r.status===201)&&c(r.data)};return s("div",{children:[s("div",{className:"panel flex items-center justify-between overflow-visible whitespace-nowrap p-3 text-dark relative",children:[s("div",{className:"flex items-center",children:[e("div",{className:"rounded-full bg-primary p-1.5 text-white ring-2 ring-primary/30 ltr:mr-3 rtl:ml-3",children:e(I,{})}),e("span",{className:"ltr:mr-3 rtl:ml-3",children:"Details of Your Email Subscriber: "}),s("button",{onClick:async()=>{window.open("http://127.0.0.1:8000/add-subscriber","_blank")},className:"btn btn-primary btn-sm",children:[" "," ",e(j,{})," Import Contact"," "," "]})]}),e("div",{className:"",children:e("button",{className:"btn btn-primary btn-sm",type:"button",onClick:u,children:" Create Single "})})]}),e(T,{isOpen:n,onClose:()=>d(!1),onSuccess:p})]})};export{$ as default};
