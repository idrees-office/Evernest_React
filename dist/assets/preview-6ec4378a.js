import{r as l,R as K,X as ae,ad as ne,c as re,T as ie,b as e,j as r,d as L,Y as se}from"./index-66b05f4f.js";/* empty css                  */import{F as oe}from"./index-c4cbc3ab.js";/* empty css                  */var ce=globalThis&&globalThis.__rest||function(t,s){var N={};for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&s.indexOf(m)<0&&(N[m]=t[m]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,m=Object.getOwnPropertySymbols(t);o<m.length;o++)s.indexOf(m[o])<0&&Object.prototype.propertyIsEnumerable.call(t,m[o])&&(N[m[o]]=t[m[o]]);return N};function le(t){const s=parseFloat(t);return!isNaN(s)&&isFinite(s)}function V(t){return typeof t=="string"&&t[t.length-1]==="%"&&le(t.substring(0,t.length-1))}function M(t,s){s===0&&(t!=null&&t.style)&&(t.style.display="none")}function de(t,s){s===0&&(t!=null&&t.style)&&(t.style.display="")}const me={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"};function X(t,s){return[t.static,s===0&&t.staticHeightZero,s>0&&t.staticHeightSpecific,s==="auto"&&t.staticHeightAuto].filter(N=>N).join(" ")}const W=t=>{var{animateOpacity:s=!1,animationStateClasses:N={},applyInlineTransitions:m=!0,children:o,className:k="",contentClassName:j,delay:i=0,duration:y=500,easing:$="ease",height:a,onHeightAnimationEnd:g,onHeightAnimationStart:w,style:h}=t,H=ce(t,["animateOpacity","animationStateClasses","applyInlineTransitions","children","className","contentClassName","delay","duration","easing","height","onHeightAnimationEnd","onHeightAnimationStart","style"]);const x=l.useRef(a),p=l.useRef(null),A=l.useRef(),T=l.useRef(),v=l.useRef(Object.assign(Object.assign({},me),N)),d=typeof window<"u",c=l.useRef(d&&window.matchMedia?window.matchMedia("(prefers-reduced-motion)").matches:!1),n=c.current?0:i,f=c.current?0:y;let S=a,O="visible";typeof S=="number"?(S=a<0?0:a,O="hidden"):V(S)&&(S=a==="0%"?0:a,O="hidden");const[D,P]=l.useState(S),[q,F]=l.useState(O),[G,E]=l.useState(!1),[J,R]=l.useState(X(v.current,a));l.useEffect(()=>{M(p.current,D)},[]),l.useEffect(()=>{if(a!==x.current&&p.current){de(p.current,x.current),p.current.style.overflow="hidden";const Z=p.current.offsetHeight;p.current.style.overflow="";const B=f+n;let b,u,I="hidden",Y;const U=x.current==="auto";typeof a=="number"?(b=a<0?0:a,u=b):V(a)?(b=a==="0%"?0:a,u=b):(b=Z,u="auto",I=void 0),U&&(u=b,b=Z);const ee=[v.current.animating,(x.current==="auto"||a<x.current)&&v.current.animatingUp,(a==="auto"||a>x.current)&&v.current.animatingDown,u===0&&v.current.animatingToHeightZero,u==="auto"&&v.current.animatingToHeightAuto,u>0&&v.current.animatingToHeightSpecific].filter(te=>te).join(" "),z=X(v.current,u);P(b),F("hidden"),E(!U),R(ee),clearTimeout(T.current),clearTimeout(A.current),U?(Y=!0,T.current=setTimeout(()=>{P(u),F(I),E(Y),w==null||w(u)},50),A.current=setTimeout(()=>{E(!1),R(z),M(p.current,u),g==null||g(u)},B)):(w==null||w(b),T.current=setTimeout(()=>{P(u),F(I),E(!1),R(z),a!=="auto"&&M(p.current,b),g==null||g(b)},B))}return x.current=a,()=>{clearTimeout(T.current),clearTimeout(A.current)}},[a]);const C=Object.assign(Object.assign({},h),{height:D,overflow:q||(h==null?void 0:h.overflow)});G&&m&&(C.transition=`height ${f}ms ${$} ${n}ms`,h!=null&&h.transition&&(C.transition=`${h.transition}, ${C.transition}`),C.WebkitTransition=C.transition);const _={};s&&(_.transition=`opacity ${f}ms ${$} ${n}ms`,_.WebkitTransition=_.transition,D===0&&(_.opacity=0));const Q=typeof H["aria-hidden"]<"u"?H["aria-hidden"]:a===0;return K.createElement("div",Object.assign({},H,{"aria-hidden":Q,className:`${J} ${k}`,style:C}),K.createElement("div",{className:j,style:_,ref:p},o))},ue={createApi:`${ae()}/subscriber/send-campaign`},ve=()=>{const t=ne();re();const s=ie(),{htmlCode:N,cssCode:m}=t.state||{htmlCode:"",cssCode:""},[o,k]=l.useState("1"),j=l.useRef({emailform:null}),[i,y]=l.useState({}),[$,a]=l.useState(!1),[g,w]=l.useState(""),h=d=>{k(c=>c===d?"":d)},H=()=>N,x=async d=>{if(d.preventDefault(),j.current.emailform){const c=new FormData(j.current.emailform);if(c.append("body",H()),c.append("schedule_at",g),!c.has("send_to_all")){s.error("Please select at least one subscriber to send the email."),y({send_to_all:["Please select at least one subscriber to send the email."]}),k("1");return}try{const n=await se.post(ue.createApi,c);s.success(n.data.message)}catch(n){if(n.response&&n.response.status===422){k("2"),y(n.response.data);const f=n.response.data;for(const S in f)f.hasOwnProperty(S)&&f[S].forEach(O=>{s.error(O)})}}}},p=d=>{const n=d.target.name;i[n]&&y(f=>({...f,[n]:""}))},A=d=>{const n=d.target.name;i[n]&&y(f=>({...f,[n]:""}))},T=d=>{const c=d.target.checked;c&&w(""),y(n=>({...n,sendNow:"",date:c?"":n.date})),a(c),!c&&!g&&(y(n=>({...n,date:["Please select a date for scheduled sending"]})),k("3"))},v=d=>{a(!1);const c=d[0];w(c),y(n=>({...n,date:""}))};return e("div",{children:e("div",{className:"min-h-screen p-2 sm:p-4",children:r("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 min-h-[calc(100vh-200px)]",children:[r("div",{className:"md:col-span-8 panel p-3 sm:p-4 border rounded bg-white shadow h-[calc(100vh-140px)] md:h-[calc(100vh-140px)] overflow-auto",children:[e("h2",{className:"text-lg font-bold mb-3",children:"HTML Code"}),e("div",{className:"mb-5",children:r("form",{className:"emailform",ref:d=>j.current.emailform=d,onSubmit:x,onKeyUp:p,children:[r("div",{className:"space-y-2 font-semibold",children:[r("div",{className:`border rounded ${i.send_to_all?"border-red-400":"border-[#d3d3d3] dark:border-[#1b2e4b]"}`,children:[r("button",{type:"button",className:`p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] ${o==="1"?"!text-primary":""}`,onClick:()=>h("1"),children:["To, Who are you sending this email to?",e("div",{className:`ltr:ml-auto rtl:mr-auto ${o==="1"?"rotate-180":""}`,children:e(L,{})})]}),e("div",{children:e(W,{duration:300,height:o==="1"?"auto":0,children:e("div",{className:"space-y-2 p-4 text-white-dark text-[13px] border-t border-[#d3d3d3] dark:border-[#1b2e4b]",children:e("div",{className:"mb-3",children:r("label",{className:"inline-flex",children:[e("input",{type:"checkbox",name:"send_to_all",className:"form-checkbox text-secondary rounded-full peer"}),e("span",{className:"peer-checked:text-secondary",children:"Send Email to All Subscribers"})]})})})})})]}),r("div",{className:`border rounded ${i.name||i.subject||i.email?"border-red-400":"border-[#d3d3d3] dark:border-[#1b2e4b]"}`,children:[r("button",{type:"button",className:`p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] ${o==="2"?"!text-primary":""}`,onClick:()=>h("2"),children:[" From: Who is sending this email?",r("div",{className:`ltr:ml-auto rtl:mr-auto ${o==="2"?"rotate-180":""}`,children:[" ",e(L,{})," "]})]}),e("div",{children:e(W,{duration:300,height:o==="2"?"auto":0,children:r("div",{className:"space-y-2 p-4 text-white-dark text-[13px] border-t border-[#d3d3d3] dark:border-[#1b2e4b]",children:[r("div",{className:"mb-3",children:[e("label",{htmlFor:"name",children:"Campaign Name "}),e("input",{id:"name",type:"text",name:"name",placeholder:"(Like) Banglore Roadshow 06052025 Post",className:"form-input",autoComplete:"off"}),i.name&&e("span",{className:"text-red-500 text-sm",children:i.name})]}),r("div",{className:"mb-3",children:[e("label",{htmlFor:"subject",children:"Subject "}),e("input",{id:"subject",type:"text",name:"subject",placeholder:"Email Subject",className:"form-input",autoComplete:"off"}),i.subject&&e("span",{className:"text-red-500 text-sm",children:i.subject})]}),r("div",{className:"mb-3",children:[e("label",{htmlFor:"from_email",children:"Email "}),r("select",{id:"from_email",name:"from_email",className:"form-select",defaultValue:"",onChange:A,children:[e("option",{value:"",disabled:!0,children:"Select Email"}),e("option",{value:"evernestre@gmail.com",children:"evernestre@gmail.com"}),e("option",{value:"info@evernestre.ae",children:"info@evernestre.ae"})]}),i.from_email&&e("span",{className:"text-red-500 text-sm",children:i.from_email})]})]})})})]}),r("div",{className:`border rounded ${i.sendNow||i.date?"border-red-400":"border-[#d3d3d3] dark:border-[#1b2e4b]"}`,children:[r("button",{type:"button",className:`p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] ${o==="3"?"!text-primary":""}`,onClick:()=>h("3"),children:[" Send Options",e("div",{className:`ltr:ml-auto rtl:mr-auto ${o==="3"?"rotate-180":""}`,children:e(L,{})})]}),e("div",{children:e(W,{duration:300,height:o==="3"?"auto":0,children:r("div",{className:"p-4 text-[13px] border-t border-[#d3d3d3] dark:border-[#1b2e4b]",children:[r("div",{className:"space-y-4 p-4 text-white-dark text-[13px] border-t border-[#d3d3d3] dark:border-[#1b2e4b]",children:[r("div",{className:"flex items-center justify-between mb-3",children:[e("label",{htmlFor:"sendNow",className:"mr-2",style:{cursor:"pointer"},children:e("h1",{children:"Send Now"})}),e("input",{id:"sendNow",type:"checkbox",name:"sendNow",className:"form-checkbox",onChange:T})]}),i.sendNow&&e("span",{className:"text-red-500 text-sm",children:i.sendNow}),e("hr",{}),r("div",{className:"mt-4",children:[e("label",{htmlFor:"slugmark",className:"text-white-dark",children:" Date"}),e(oe,{value:g,name:"scheduled_at",options:{dateFormat:"Y-m-d H:i",enableTime:!0},className:"form-input",onChange:v,disabled:$,placeholder:"Y-m-d H:i"}),i.date&&e("span",{className:"text-red-500 text-sm",children:i.date})]})]}),e("hr",{})]})})})]})]}),e("div",{className:"mb-3",children:e("button",{type:"submit",className:"mt-3 btn btn-secondary text-white rounded",children:" Send "})})]})})]}),r("div",{className:"md:col-span-4 panel p-3 sm:p-4 border rounded bg-white shadow h-[50vh] md:h-[calc(100vh-140px)]",children:[e("h2",{className:"text-lg font-bold mb-3",children:"Live Preview"}),e("div",{className:"h-[calc(100%-2rem)]",children:e("iframe",{title:"preview",className:"w-full h-full border rounded",srcDoc:H(),scrolling:"no",seamless:!0,style:{width:"100%",height:"100%",border:"none"}})})]})]})})})};export{ve as default};
