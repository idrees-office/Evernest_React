import{u as _,T as x,r as s,a as D,s as R,j as n,b as o,a4 as c}from"./index-925e5e72.js";import{T as F}from"./Table-4c615204.js";import{I as O}from"./IconBell-b7a79d6e.js";/* empty css                  */import"./index-2d506cb4.js";import"./floating-ui.dom.browser.min-b8726d47.js";import"./extends-4c19d496.js";const H=()=>{const a=_();x();const d=s.useRef({fetched:!1,form:null,prevPage:1,prevPerPage:10,prevSortStatus:{columnAccessor:"id",direction:"desc"}}),[j,i]=s.useState([]),[y,u]=s.useState(!0),[S,z]=s.useState(1),[m,E]=s.useState(10),[r,P]=s.useState(""),[t,b]=s.useState({columnAccessor:"date",direction:"desc"}),{leads:l,loading:I,total:h,last_page:L,current_page:p,per_page:g}=D(e=>e.leadslices),N=()=>{a(c({page:r?1:p,perPage:m,sortField:t.columnAccessor==="date"?"updated_at":t.columnAccessor,sortOrder:t.direction,search:r}))};s.useEffect(()=>{d.current.fetched||(a(R("Closed Deals")),N(),d.current.fetched=!0)},[S,m,t,r]);const A=e=>{a(c({page:e,sortField:t.columnAccessor,sortOrder:t.direction,search:r})),i([]),u(!0)},C=e=>{a(c({perPage:e,sortField:t.columnAccessor,sortOrder:t.direction,search:r})),i([]),u(!0)},v=e=>{b(e),a(c({sortField:e.columnAccessor,sortOrder:e.direction,search:r}))},w=e=>{const f=e.target.value;P(f),a(c({page:1,perPage:g,sortField:t.columnAccessor,sortOrder:t.direction,search:f}))},T=(l==null?void 0:l.map(e=>({id:e.lead_id||"N/A",title:e.lead_title||"N/A",name:e.customer_name||"N/A",phone:e.customer_phone||"N/A",status:e.lead_status||"N/A",date:e.updated_at||"N/A"})))||[];return n("div",{className:"",children:[o("div",{className:"panel flex items-center justify-between overflow-visible whitespace-nowrap p-3 text-dark relative",children:n("div",{className:"flex items-center",children:[n("div",{className:"rounded-full bg-primary p-1.5 text-white ring-2 ring-primary/30 ltr:mr-3 rtl:ml-3",children:[" ",o(O,{})," "]}),o("span",{className:"ltr:mr-3 rtl:ml-3",children:"Closed Deals"})]})}),o("div",{className:"datatables mt-6",children:o(F,{title:`Closed Deals (${h})`||"Closed Deals (0)",columns:[{accessor:"title",title:"Title",sortable:!0,width:"25%"},{accessor:"name",title:"Name",sortable:!0,width:"20%"},{accessor:"phone",title:"Phone",sortable:!0,width:"15%"},{accessor:"status",title:"Status",sortable:!1,width:"15%",render:()=>o("span",{className:"badge bg-success",children:"Closed"})},{accessor:"date",title:"Closed Date",sortable:!0,width:"25%"}],rows:T,totalRecords:h,currentPage:p,recordsPerPage:g,onPageChange:A,onRecordsPerPageChange:C,onSortChange:v,sortStatus:t,onSearchChange:w,searchValue:r,noRecordsText:"No closed deals found"})})]})};export{H as default};
