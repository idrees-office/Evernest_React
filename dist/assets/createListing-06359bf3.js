import{V as c,u as U,T as q,r,s as H,W as p,S as D,j as e,a as t}from"./index-2e876513.js";import{R as T,a as Q,b as V}from"./status-35ff210f.js";import{S as C}from"./react-select.esm-dd51a870.js";/* empty css                  */import{l as I}from"./index-895a3b48.js";/* empty css                   */import"./IconThumbUp-8701476b.js";import"./IconTrash-9b5aafda.js";import"./objectWithoutPropertiesLoose-f3b3ace0.js";import"./extends-4c19d496.js";import"./floating-ui.dom.browser.min-b8726d47.js";const m={createApi:`${c()}/users/create_user`,roleApi:`${c()}/users/get_user_role`,listApi:`${c()}/users/user_list`,destoryApi:`${c()}/users/delete_user`,updateApi:`${c()}/users/update_user`},he=()=>{const f=U();q();const d=r.useRef({userformRef:null}),[W,B]=r.useState([]),[G,z]=r.useState(null),[s,b]=r.useState({}),[J,E]=r.useState(null),[K,O]=r.useState(null),N=r.useRef(!1),[y,X]=r.useState(1),[v,Y]=r.useState(10),[Z,$]=r.useState(0),[u,ee]=r.useState({columnAccessor:"client_user_id",direction:"asc"}),[x,te]=r.useState(""),[S,h]=r.useState({disabled:!0,occupancyoption:{}}),[R,F]=r.useState(null),[w,g]=r.useState({disabled:!0,options:T});r.useEffect(()=>{N.current||(f(H("Create User")),j(),N.current=!0)},[f]),r.useEffect(()=>{P()},[y,v,u,x]);const j=async()=>{var a;try{const i=await p.get(m.roleApi);if(i.data){const l=i.data.data.map(n=>({value:n.id,label:n.name}));E(l)}}catch(i){((a=i.response)==null?void 0:a.status)===403&&(window.location.href="/error")}},P=async()=>{var a;try{const i={page:y,per_page:v,sort_field:u.columnAccessor,sort_order:u.direction,search:x},l=await p.get(m.listApi,{params:i});l.data&&(B(l.data.data.data||[]),$(l.data.data.total||0))}catch(i){((a=i.response)==null?void 0:a.status)===403&&(window.location.href="/error"),A()}},L=async a=>{var i,l,n;a.preventDefault();try{if(d.current.userformRef){const o=new FormData(d.current.userformRef),k=o.get("client_user_id"),_=k?await p.post(`${m.updateApi}/${k}`,o):await p.post(m.createApi,o);(_.status===200||_.status===201)&&(M(_.data.message),P(),b({}),d.current.userformRef.reset(),O(null),z(null))}}catch(o){(l=(i=o.response)==null?void 0:i.data)!=null&&l.errors?b(o.response.data.errors):((n=o.response)==null?void 0:n.status)===403?window.location.href="/error":A()}},M=a=>{D.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,title:a,icon:"success"})},A=()=>{D.fire({text:"Something went wrong on the server",icon:"error",title:"Server Error"})};return e("form",{ref:a=>d.current.userformRef=a,onSubmit:L,className:"space-y-5",children:t("div",{className:"flex flex-wrap -mx-4",children:[e("div",{className:"w-full lg:w-1/3 px-4",children:e("div",{className:"panel",children:t("div",{className:"panel-body",children:[t("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_category_id",children:"Listing Type"}),t("select",{id:"listing_category_id",className:"form-input",onChange:a=>{const i=a.target.value?a.target.value:"0";if(F(null),!i||i==0){h({disabled:!0,occupancyoption:{}}),g({disabled:!0,options:[]});return}const l=i==1||i===2,n=i==3||i==4;l?(h({disabled:!1,occupancyoption:Q}),g({disabled:!1,options:T})):n&&(h({disabled:!1,occupancyoption:V}),g({disabled:!0,options:[]}))},children:[e("option",{value:"",children:"Select Listing Type"}),e("option",{value:"1",children:"Residential (Rent)"}),e("option",{value:"2",children:"Commercial (Rent)"}),e("option",{value:"3",children:"Residential (Sale)"}),e("option",{value:"4",children:"Commercial (Sale)"})]}),e("input",{type:"hidden",name:"listing_id",id:"listing_id"}),s.listing_category_id&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_category_id," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_slug",children:"Slug"}),e("input",{name:"listing_slug",type:"text",placeholder:"Slug",className:"form-input"}),s.listing_slug&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_slug," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_meta_description",children:"Meta Designation"}),e("input",{name:"listing_meta_description",type:"text",placeholder:"Meta Designation",className:"form-input"}),s.listing_meta_description&&e("span",{className:"text-red-500 text-sm",children:s.listing_meta_description})]}),t("div",{className:"form-group",children:[t("div",{className:"form-group",children:[e("label",{htmlFor:"rental_period",children:"Rental Period"}),e(C,{name:"rental_period",placeholder:"Select rental period",value:R,options:w.options,isDisabled:w.disabled})]}),s.rental_period&&e("span",{className:"text-red-500 text-sm",children:s.rental_period})]}),t("div",{className:"form-group sm:col-span-2",children:[e("label",{htmlFor:"price",children:"Price"}),e("input",{name:"price",type:"text",placeholder:"Price",className:"form-input"}),s.price&&e("span",{className:"text-red-500 text-sm",children:s.price})]}),t("div",{className:"form-group sm:col-span-2",children:[e("label",{htmlFor:"listing_meta_description",children:"Designation"}),e(I,{theme:"snow",placeholder:"Description"})]})]}),e("div",{className:"flex justify-end mt-4",children:t("button",{type:"submit",className:"btn btn-primary",children:[" ","Submit"," "]})})]})})}),e("div",{className:"w-full lg:w-1/3 px-4",children:e("div",{className:"panel",children:e("div",{className:"panel-body",children:t("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_reference",children:"Reference #"}),e("input",{name:"listing_reference",type:"number",placeholder:"Reference Number",className:"form-input"}),s.listing_reference&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_reference," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_type_id",children:"Property Type"}),e("input",{name:"listing_type_id",type:"text",placeholder:"Slug",className:"form-input"}),s.listing_type_id&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_type_id," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_size",children:"Size (Sqft)"}),e("input",{name:"listing_size",type:"text",placeholder:"Size",className:"form-input"}),s.listing_size&&e("span",{className:"text-red-500 text-sm",children:s.listing_size})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_built_up_area",children:"Built-up area (Sqft): #"}),e("input",{name:"listing_built_up_area",type:"number",placeholder:"Built-up Area",className:"form-input"}),s.listing_built_up_area&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_built_up_area," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_bedrooms",children:"# of Bedrooms:"}),e("input",{name:"listing_bedrooms",type:"number",placeholder:"Bedrooms...",className:"form-input"}),s.listing_bedrooms&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_bedrooms," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_bathrooms",children:"# of Bathrooms:"}),e("input",{name:"listing_bathrooms",type:"number",placeholder:"Bathrooms..",className:"form-input"}),s.listing_bathrooms&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_bathrooms," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_parking_space",children:"# of Parking"}),e("input",{name:"listing_parking_space",type:"number",placeholder:"Parking",className:"form-input"}),s.listing_parking_space&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_parking_space," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_furnished_type",children:"Furnished Type"}),t("select",{id:"listing_furnished_type",className:"form-input",children:[e("option",{value:"",children:"Select Furnished Type"}),e("option",{value:"1",children:"Furnished"}),e("option",{value:"2",children:"Sami-Furnished"}),e("option",{value:"3",children:"unFurnished"})]}),s.listing_furnished_type&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_furnished_type," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_parking_space",children:"# of Parking"}),e("input",{name:"listing_parking_space",type:"number",placeholder:"Parking",className:"form-input"}),s.listing_parking_space&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_parking_space," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"occupancy_status",children:"Occupancy"}),e(C,{name:"occupancy_status",placeholder:"Select occupancy",options:S.occupancyoption,isDisabled:S.disabled,onChange:a=>F(a),value:R}),s.occupancy_status&&e("span",{className:"text-red-500 text-sm",children:s.occupancy_status})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_permit",children:"Property Permit"}),t("select",{id:"listing_permit",className:"form-input",children:[e("option",{value:"",children:"Property Permit"}),e("option",{value:"1",children:"RERA"}),e("option",{value:"2",children:"DTCM"})]}),s.listing_permit&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_permit," "]})]}),t("div",{className:"form-group",children:[e("label",{htmlFor:"listing_permit_number",children:"Permit Number"}),e("input",{name:"listing_permit_number",type:"number",placeholder:"Permit Number",className:"form-input"}),s.listing_permit_number&&t("span",{className:"text-red-500 text-sm",children:[" ",s.listing_permit_number," "]})]})]})})})})]})})};export{he as default};
