import{X as _,u as D,r as l,s as L,Y as R,S as V,a as O,b as e,j as a,P as Y,O as J,D as Q,A as X}from"./index-b9ec9dcf.js";import{I as B,a as H}from"./IconNotesEdit-158ce9e5.js";import{I as y}from"./IconStar-6da4d930.js";import{I as U}from"./IconHorizontalDots-b53316dd.js";import{I as q}from"./IconEye-64a17820.js";import{Y as b,y as S}from"./transition-aacbdc25.js";const G={listApi:`${_()}/announcements/show`},oe=()=>{D();const[o,k]=l.useState([]),C={id:null,title:"",description:"",tag:"",user:"",thumb:""},[s,F]=l.useState(JSON.parse(JSON.stringify(C)));l.useState(!1),l.useState(!1);const[c,h]=l.useState(!1),[g,d]=l.useState(!1),[u,m]=l.useState([]),[i,I]=l.useState("all");l.useState(null);const[v,K]=l.useState(1),[x,W]=l.useState(10),[Z,A]=l.useState(0),[N,ee]=l.useState(""),[p,te]=l.useState({columnAccessor:"id",direction:"desc"});l.useEffect(()=>{L("Create Announcements"),T()},[v,x,p,N]);const f=()=>{m(i!=="fav"?i!=="all"||i==="delete"?o.filter(t=>t.tag===i):o:o.filter(t=>t.isFav))},T=async()=>{var t;try{const r={page:v,per_page:x,sort_field:p.columnAccessor,sort_order:p.direction,search:N},n=await R.get(G.listApi,{params:r});n.data&&(k(n.data.data||[]),A(n.data.data.total||0))}catch(r){((t=r.response)==null?void 0:t.status)===403&&(window.location.href="/error"),j()}},j=()=>{V.fire({text:"Something went wrong on the server",icon:"error",title:"Server Error"})},P=t=>{if(!t)return"";const r=t.split(" ");return r.length>20?r.slice(0,20).join(" ")+"...":t},z=t=>{I(t),h(!1),f()},E=t=>{let r=u,n=r.find(M=>M.id===t.id);n.isFav=!n.isFav,m([...r]),(i!=="all"||i==="delete")&&f()},w=t=>{F(t),d(!0)};l.useEffect(()=>{f()},[i,o]);const $=O(t=>t.themeConfig.rtlClass)==="rtl";return e("div",{children:a("div",{className:"flex gap-5 relative sm:h-[calc(100vh_-_150px)] h-full",children:[e("div",{className:`bg-black/60 z-10 w-full h-full rounded-md absolute hidden ${c?"!block xl:!hidden":""}`,onClick:()=>h(!c)}),a("div",{className:`panel
                    p-4
                    flex-none
                    w-[240px]
                    absolute
                    xl:relative
                    z-10
                    space-y-4
                    h-full
                    xl:h-auto
                    hidden
                    xl:block
                    ltr:lg:rounded-r-md ltr:rounded-r-none
                    rtl:lg:rounded-l-md rtl:rounded-l-none
                    overflow-hidden ${c?"!block h-full ltr:left-0 rtl:right-0":"hidden shadow"}`,children:[a("div",{className:"flex flex-col h-full pb-16",children:[a("div",{className:"flex text-center items-center",children:[e("div",{className:"shrink-0",children:e(B,{})}),e("h3",{className:"text-lg font-semibold ltr:ml-3 rtl:mr-3",children:"All Announcements"})]}),e("div",{className:"h-px w-full border-b border-white-light dark:border-[#1b2e4b] my-4"}),e(Y,{className:"relative ltr:pr-3.5 rtl:pl-3.5 ltr:-mr-3.5 rtl:-ml-3.5 h-full grow",children:a("div",{className:"space-y-1",children:[e("button",{type:"button",className:`w-full flex justify-between items-center p-2 hover:bg-white-dark/10 rounded-md dark:hover:text-primary hover:text-primary dark:hover:bg-[#181F32] font-medium h-10 ${i==="all"&&"bg-gray-100 dark:text-primary text-primary dark:bg-[#181F32]"}`,onClick:()=>z("all"),children:a("div",{className:"flex items-center",children:[e(H,{className:"shrink-0"}),e("div",{className:"ltr:ml-3 rtl:mr-3",children:"All Notes"})]})}),e("div",{className:"h-px w-full border-b border-white-light dark:border-[#1b2e4b]"}),e("div",{className:"px-1 py-3 text-white-dark",children:"Tags"})]})})]}),e("div",{className:"ltr:left-0 rtl:right-0 absolute bottom-0 p-4 w-full"})]}),a("div",{className:"panel flex-1 overflow-auto h-full",children:[e("div",{className:"pb-5",children:e("button",{type:"button",className:"xl:hidden hover:text-primary",onClick:()=>h(!c),children:e(J,{})})}),u.length?e("div",{className:"sm:min-h-[300px] min-h-[400px]",children:e("div",{className:"grid 2xl:grid-cols-4 lg:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-5",children:u.map(t=>a("div",{className:"panel pb-12 bg-info-light shadow-info",children:[a("div",{className:"min-h-[142px]",children:[a("div",{className:"flex justify-between",children:[e("div",{className:"flex items-center w-max",children:e("div",{className:"ltr:ml-2 rtl:mr-2",children:e("div",{className:"text-sx text-white-dark",children:t.updated_at})})}),e("div",{className:"dropdown",children:e(Q,{offset:[0,5],placement:`${$?"bottom-start":"bottom-end"}`,btnClassName:"text-primary",button:e(U,{className:"rotate-90 opacity-70 hover:opacity-100"}),children:e("ul",{className:"text-sm font-medium",children:e("li",{children:a("button",{type:"button",onClick:()=>w(t),children:[e(q,{className:"w-4.5 h-4.5 ltr:mr-3 rtl:ml-3 shrink-0"}),"View"]})})})})})]}),a("div",{children:[e("h4",{className:"font-semibold mt-4",children:t.title}),a("p",{className:"text-white-dark mt-2",children:[P(t.description),t.description&&t.description.split(" ").length>20&&e("button",{type:"button",className:"text-primary ml-1 hover:underline",onClick:()=>w(t),children:" Read More "})]})]})]}),e("div",{className:"absolute bottom-5 left-0 w-full px-5",children:e("div",{className:"flex items-center justify-between mt-2",children:e("div",{className:"flex items-center",children:e("button",{type:"button",className:"text-warning group ltr:ml-2 rtl:mr-2",onClick:()=>E(t),children:e(y,{className:`w-4.5 h-4.5 group-hover:fill-warning ${t.isFav&&"fill-warning"}`})})})})})]},t.id))})}):e("div",{className:"flex justify-center items-center sm:min-h-[300px] min-h-[400px] font-semibold text-lg h-full",children:"There is no new announcement."}),e(b,{appear:!0,show:g,as:l.Fragment,children:a(S,{as:"div",open:g,onClose:()=>d(!1),className:"relative z-[51]",children:[e(b.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(b.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a(S.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>d(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(X,{})}),a("div",{className:"flex items-center flex-wrap gap-2 text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:[e("div",{className:"ltr:mr-3 rtl:ml-3",children:s.title}),s.tag&&e("button",{type:"button",className:`badge badge-outline-primary rounded-3xl capitalize ltr:mr-3 rtl:ml-3 ${s.tag,s.tag,s.tag,s.tag==="important"&&"shadow-danger"}`,children:s.tag}),s.isFav&&e("button",{type:"button",className:"text-warning",children:e(y,{className:"fill-warning"})})]}),a("div",{className:"p-5",children:[e("div",{className:"text-base",children:s.description}),e("div",{className:"ltr:text-right rtl:text-left mt-8",children:e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>d(!1),children:"Close"})})]})]})})})})]})})]})]})})};export{oe as default};
