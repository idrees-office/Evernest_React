import{X as N,u as P,r as t,Y as v,S as C,j as a}from"./index-1a498c6b.js";/* empty css                  */import{T as x}from"./Table-2c81ce9c.js";import"./index-bad6cd04.js";import"./floating-ui.dom.browser.min-b8726d47.js";import"./extends-4c19d496.js";const A={listApi:`${N()}/subscriber/show-email-report`},O=()=>{P();const[m,d]=t.useState(!1),[n,o]=t.useState(1),[c,p]=t.useState(10),[b,h]=t.useState(0),[s,S]=t.useState({columnAccessor:"id",direction:"asc"}),[i,f]=t.useState(""),[u,_]=t.useState([]),g=t.useRef({fetched:!1});t.useEffect(()=>{g.current.fetched||w(),g.current.fetched=!0},[n,c,s,i]);const w=async()=>{var e;try{d(!0);const r={page:n,per_page:c,sort_field:s.columnAccessor,sort_order:s.direction,search:i},l=await v.get(A.listApi,{params:r});l.data&&(_(l.data.data||[]),h(l.data.meta.total||0))}catch(r){((e=r.response)==null?void 0:e.status)===403&&(window.location.href="/error"),R("Something wrong on server")}finally{d(!1)}},R=e=>{C.fire({text:e,icon:"error",title:"Server Error"})},y=e=>{f(e.target.value),o(1)},E=(Array.isArray(u)?u:[]).map((e,r)=>({id:e.id,campaign_name:e.campaign_name,subscriber_name:e.subscriber_name,last_opened_at:e.last_opened_at,status:e.status}));return a("div",{children:a("div",{className:"datatables mt-6",children:a(x,{title:"Email Reports:",columns:[{accessor:"id",title:"#",sortable:!0},{accessor:"campaign_name",title:"Campaign Name",sortable:!0},{accessor:"subscriber_name",title:"Subscriber Name",sortable:!0},{accessor:"last_opened_at",title:"Last Open",sortable:!0},{accessor:"status",title:"Status",sortable:!0,render:e=>{switch(e.status){case 1:return a("span",{className:"badge bg-success",children:"Opend"});case 2:return a("span",{className:"badge bg-secondary",children:"Inactive"});case 3:return a("span",{className:"badge bg-danger",children:"Unsubscribed"});default:return a("span",{className:"badge bg-light",children:"Unknown"})}}}],rows:E,totalRecords:b,currentPage:n,recordsPerPage:c,onPageChange:e=>o(e),onRecordsPerPageChange:e=>{p(e),o(1)},onSortChange:S,onSearchChange:y,sortStatus:s,isLoading:m,minHeight:200,noRecordsText:"No subscribers found",searchValue:i})})})};export{O as default};
