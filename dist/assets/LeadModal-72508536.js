import{u as x,r as l,T as y,b as e,j as t,A as _,ab as g,N as F}from"./index-925e5e72.js";import{Y as m,y as p}from"./transition-223ea926.js";const k=({isOpen:n,onClose:c})=>{const u=x(),[a,i]=l.useState({}),o=l.useRef({addleadform:null}),h=y(),[L,f]=l.useState([]),[w,b]=l.useState();l.useEffect(()=>{n&&i({});const r=JSON.parse(localStorage.getItem("permissions")||"[]"),d=localStorage.getItem("role")||"";f(r),b(d)},[n]);const N=async r=>{if(r.preventDefault(),o.current.addleadform){const d=new FormData(o.current.addleadform),v=d.get("lead_status");try{const s=await u(g({formData:d}));if(s.payload.status===200||s.payload.status===201)h.success("Lead Create Successfully"),c(),i({}),o.current.addleadform.reset(),u(F({page_number:s.payload.last_page,lead_status:Number(v)}));else{i(s.payload.errors);return}}catch(s){console.error("Error creating/updating news:",s)}}};return e(m,{appear:!0,show:n,as:l.Fragment,children:t(p,{as:"div",open:n,onClose:c,className:"relative z-[51]",children:[e(m.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(m.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t(p.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:c,className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(_,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:" Add Lead..."}),e("div",{className:"p-5",children:t("form",{className:"leadForm",ref:r=>o.current.addleadform=r,onSubmit:N,children:[t("div",{className:"mb-3",children:[e("label",{htmlFor:"lead_title",children:"Lead Title "}),e("input",{id:"lead_title",type:"text",placeholder:"Lead Title #XXXXXX",name:"lead_title",className:"form-input"}),(a==null?void 0:a.lead_title)&&e("p",{className:"text-danger error",children:a.lead_title[0]})]}),t("div",{className:"mb-3",children:[e("label",{htmlFor:"customer_name",children:"Client Name"}),e("input",{id:"customer_name",type:"text",name:"customer_name",placeholder:"Customer Name",className:"form-input"}),(a==null?void 0:a.customer_name)&&e("p",{className:"text-danger error",children:a.customer_name[0]})]}),t("div",{className:"mb-3",children:[e("label",{htmlFor:"customer_email",children:"Client Email "}),e("input",{id:"customer_email",type:"text",name:"customer_email",placeholder:"john@gmail.com",className:"form-input"}),(a==null?void 0:a.customer_email)&&e("p",{className:"text-danger error",children:a.customer_email[0]})]}),t("div",{className:"mb-3 flex justify-between gap-4",children:[t("div",{className:"flex-1",children:[e("label",{htmlFor:"customer_phone",children:"Phone"}),e("input",{id:"customer_phone",type:"text",name:"customer_phone",placeholder:"+971623523623",className:"form-input"}),(a==null?void 0:a.customer_phone)&&e("p",{className:"text-danger error",children:a.customer_phone[0]})]}),t("div",{className:"flex-1",children:[e("label",{htmlFor:"lead_status",children:"Status"}),t("select",{id:"lead_status",name:"lead_status",className:"form-select",children:[e("option",{value:"17",children:"New Lead"}),e("option",{value:"3",children:"Connected Lead"}),e("option",{value:"4",children:"Cold Lead"}),e("option",{value:"5",children:"Warm Lead"}),e("option",{value:"6",children:"Hot Lead"}),e("option",{value:"16",children:"Won Lead (Close Deel)"})]}),(a==null?void 0:a.lead_status)&&e("p",{className:"text-danger error",children:a.lead_status[0]})]})]}),t("div",{className:"mb-3",children:[e("label",{htmlFor:"lead_comments",children:"Comments "}),e("textarea",{name:"lead_comments",id:"lead_comments",className:"form-input",placeholder:"Please add your comments..."}),(a==null?void 0:a.lead_comments)&&e("p",{className:"text-danger error",children:a.lead_comments[0]})]}),t("div",{className:"ltr:text-right rtl:text-left flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:c,children:" Cancel "}),e("button",{type:"submit",className:"btn btn-success ltr:ml-2 rtl:mr-2 btn-sm",children:"Save"})]})]})})]})})})})]})})};export{k as L};
